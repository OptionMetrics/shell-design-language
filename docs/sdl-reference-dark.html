<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shell Design Language — Visual Reference</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,600;1,9..144,300&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #f5f3ef;
    --surface: #ffffff;
    --surface2: #f0ede8;
    --border: #dedad4;
    --border-bright: #c8c4bc;
    --text: #1a1816;
    --text-dim: #9a9690;
    --text-mid: #5a5650;
    --accent: #8a6a2e;
    --accent2: #2e6878;
    --accent3: #8a3e3e;
    --accent4: #3e7a3e;
    --accent5: #5a3e78;

    /* Region colors */
    --col-chrome: #e8eaf6;
    --col-anchor: #e8f5e9;
    --col-viewport: #e8eaf6;
    --col-panel: #fce8e8;
    --col-overlay-modal: #fff8e1;
    --col-overlay-anchored: #e0f2f1;

    --stroke-chrome: #3949ab;
    --stroke-anchor: #2e7d32;
    --stroke-viewport: #3949ab;
    --stroke-panel: #c62828;
    --stroke-overlay-modal: #f57f17;
    --stroke-overlay-anchored: #00695c;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Fraunces', Georgia, serif;
    font-size: 16px;
    line-height: 1.6;
    padding: 0;
  }

  .page {
    max-width: 1100px;
    margin: 0 auto;
    padding: 80px 40px;
  }

  /* Header */
  .doc-header {
    border-bottom: 1px solid var(--border);
    padding-bottom: 48px;
    margin-bottom: 72px;
  }

  .doc-eyebrow {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.15em;
    color: var(--accent);
    text-transform: uppercase;
    margin-bottom: 16px;
  }

  h1 {
    font-size: clamp(36px, 5vw, 56px);
    font-weight: 300;
    line-height: 1.1;
    letter-spacing: -0.02em;
    color: var(--text);
    margin-bottom: 20px;
  }

  .doc-subtitle {
    font-size: 18px;
    font-weight: 300;
    color: var(--text-mid);
    font-style: italic;
    max-width: 600px;
  }

  /* Section headings */
  .section {
    margin-bottom: 80px;
  }

  .section-label {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    color: var(--text-dim);
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  h2 {
    font-size: 28px;
    font-weight: 300;
    letter-spacing: -0.01em;
    margin-bottom: 8px;
    color: var(--text);
  }

  h3 {
    font-size: 18px;
    font-weight: 400;
    color: var(--text-mid);
    margin-bottom: 32px;
    font-style: italic;
  }

  .section-intro {
    font-size: 15px;
    color: var(--text-mid);
    max-width: 680px;
    margin-bottom: 40px;
    line-height: 1.7;
  }

  /* Legend */
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 40px;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--text-mid);
    letter-spacing: 0.05em;
  }

  .legend-swatch {
    width: 20px;
    height: 14px;
    border-radius: 2px;
    border: 1.5px solid;
    flex-shrink: 0;
  }

  /* Diagrams */
  .diagram-container {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 32px;
    margin-bottom: 16px;
  }

  .diagram-caption {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
    letter-spacing: 0.08em;
    margin-top: 12px;
    padding-left: 4px;
  }

  /* Composition grid */
  .compositions-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-bottom: 16px;
  }

  .composition-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 24px 20px 16px;
  }

  .composition-name {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.12em;
    color: var(--accent);
    text-transform: uppercase;
    margin-bottom: 16px;
  }

  /* Transitions table */
  .transitions-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .transition-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 20px;
  }

  .transition-name {
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    color: var(--accent2);
    letter-spacing: 0.08em;
    margin-bottom: 8px;
  }

  .transition-desc {
    font-size: 13px;
    color: var(--text-mid);
    line-height: 1.5;
  }

  /* SDL description block */
  .sdl-description {
    background: var(--surface);
    border: 1px solid var(--border);
    border-left: 3px solid var(--accent);
    border-radius: 0 8px 8px 0;
    padding: 24px 28px;
    font-family: 'DM Mono', monospace;
    font-size: 13px;
    line-height: 1.8;
    color: var(--text-mid);
    letter-spacing: 0.02em;
  }

  .sdl-description span {
    color: var(--text);
  }

  .sdl-description .keyword {
    color: var(--accent);
  }

  .sdl-description .value {
    color: var(--accent2);
  }

  /* Divider */
  .divider {
    border: none;
    border-top: 1px solid var(--border);
    margin: 64px 0;
  }

  /* SVG shared styles */
  .diagram-svg {
    width: 100%;
    height: auto;
    display: block;
  }

  text {
    font-family: 'DM Mono', monospace;
  }

  /* Overlay arrows */
  .annotation-line {
    stroke: #4a4a4a;
    stroke-width: 1;
    stroke-dasharray: 4 3;
  }

  @media (max-width: 720px) {
    .compositions-grid { grid-template-columns: repeat(2, 1fr); }
    .transitions-grid { grid-template-columns: 1fr; }
    .page { padding: 40px 20px; }
  }
</style>
</head>
<body>
<div class="page">

  <header class="doc-header">
    <div class="doc-eyebrow">SDL · Draft 1.0 · February 2026</div>
    <h1>Shell Design Language</h1>
    <p class="doc-subtitle">A visual reference for the structural architecture of application interfaces</p>
  </header>

  <!-- LEGEND -->
  <section class="section">
    <div class="section-label">Reference</div>
    <h2>Region Type Legend</h2>
    <h3>Every region in an SDL diagram uses a consistent colour and border</h3>

    <div class="legend">
      <div class="legend-item">
        <div class="legend-swatch" style="background:#1a1a2e; border-color:#4a5a8a;"></div>
        Chrome
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background:#1e2a1e; border-color:#5a8a5a;"></div>
        Anchor
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background:#1e1e2e; border-color:#5a5a8a;"></div>
        Viewport
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background:#2e1e1e; border-color:#8a5a5a;"></div>
        Panel
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background:#2e2a1a; border-color:#8a7a4a;"></div>
        Modal Overlay
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background:#1a2e2a; border-color:#4a8a7a;"></div>
        Anchored Overlay
      </div>
    </div>

    <!-- Legend diagram -->
    <div class="diagram-container">
      <svg class="diagram-svg" viewBox="0 0 900 140" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <pattern id="hatch" patternUnits="userSpaceOnUse" width="6" height="6" patternTransform="rotate(45)">
            <line x1="0" y1="0" x2="0" y2="6" stroke="#3a3a3a" stroke-width="1"/>
          </pattern>
        </defs>

        <!-- Chrome -->
        <rect x="20" y="20" width="120" height="100" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="2" rx="4"/>
        <text x="80" y="65" fill="#4a5a8a" font-size="10" text-anchor="middle" letter-spacing="1">CHROME</text>
        <text x="80" y="80" fill="#3a4a7a" font-size="9" text-anchor="middle">outermost container</text>
        <text x="80" y="93" fill="#3a4a7a" font-size="9" text-anchor="middle">overflow: hidden</text>

        <!-- Anchor -->
        <rect x="170" y="20" width="120" height="100" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="2" rx="4"/>
        <text x="230" y="65" fill="#5a8a5a" font-size="10" text-anchor="middle" letter-spacing="1">ANCHOR</text>
        <text x="230" y="80" fill="#3a6a3a" font-size="9" text-anchor="middle">fixed dimension</text>
        <text x="230" y="93" fill="#3a6a3a" font-size="9" text-anchor="middle">sidebar, header, footer</text>

        <!-- Viewport -->
        <rect x="320" y="20" width="120" height="100" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="2" rx="4"/>
        <text x="380" y="65" fill="#5a5a8a" font-size="10" text-anchor="middle" letter-spacing="1">VIEWPORT</text>
        <text x="380" y="80" fill="#3a3a7a" font-size="9" text-anchor="middle">flex, owns scroll</text>
        <text x="380" y="93" fill="#3a3a7a" font-size="9" text-anchor="middle">content lives here</text>

        <!-- Panel -->
        <rect x="470" y="20" width="120" height="100" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="2" rx="4"/>
        <text x="530" y="65" fill="#8a5a5a" font-size="10" text-anchor="middle" letter-spacing="1">PANEL</text>
        <text x="530" y="80" fill="#6a3a3a" font-size="9" text-anchor="middle">dynamically injected</text>
        <text x="530" y="93" fill="#6a3a3a" font-size="9" text-anchor="middle">compresses Viewports</text>

        <!-- Modal Overlay -->
        <rect x="620" y="20" width="120" height="100" fill="#2e2a1a" stroke="#8a7a4a" stroke-width="2" rx="4"/>
        <text x="680" y="58" fill="#8a7a4a" font-size="10" text-anchor="middle" letter-spacing="1">MODAL</text>
        <text x="680" y="72" fill="#8a7a4a" font-size="10" text-anchor="middle" letter-spacing="1">OVERLAY</text>
        <text x="680" y="87" fill="#6a5a3a" font-size="9" text-anchor="middle">floats above layout</text>
        <text x="680" y="100" fill="#6a5a3a" font-size="9" text-anchor="middle">blocks interaction</text>

        <!-- Anchored Overlay -->
        <rect x="770" y="20" width="120" height="100" fill="#1a2e2a" stroke="#4a8a7a" stroke-width="2" rx="4"/>
        <text x="830" y="51" fill="#4a8a7a" font-size="10" text-anchor="middle" letter-spacing="1">ANCHORED</text>
        <text x="830" y="65" fill="#4a8a7a" font-size="10" text-anchor="middle" letter-spacing="1">OVERLAY</text>
        <text x="830" y="80" fill="#3a6a5a" font-size="9" text-anchor="middle">floats above layout</text>
        <text x="830" y="93" fill="#3a6a5a" font-size="9" text-anchor="middle">tied to trigger element</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 1 — The six region types of the Shell Design Language</p>
  </section>

  <hr class="divider">

  <!-- CLAUDE DESKTOP ANNOTATED -->
  <section class="section">
    <div class="section-label">Case Study</div>
    <h2>Claude Desktop — Annotated</h2>
    <h3>A real application described in SDL terms</h3>
    <p class="section-intro">
      Every region is labelled with its SDL type, its name in this application, and its key behaviours. 
      Dashed lines connect regions to their annotations.
    </p>

    <div class="diagram-container">
      <svg class="diagram-svg" viewBox="0 0 900 560" xmlns="http://www.w3.org/2000/svg">

        <!-- Chrome -->
        <rect x="20" y="20" width="680" height="480" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="2" rx="6"/>

        <!-- Sidebar Anchor -->
        <rect x="30" y="30" width="170" height="460" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="4"/>

        <!-- Anchor Header zone -->
        <rect x="30" y="30" width="170" height="55" fill="#1a2a1a" stroke="#5a8a5a" stroke-width="1" rx="4"/>
        <text x="115" y="53" fill="#5a8a5a" font-size="9" text-anchor="middle" letter-spacing="0.5">ANCHOR HEADER</text>
        <text x="115" y="66" fill="#4a7a4a" font-size="8" text-anchor="middle">workspace switcher</text>

        <!-- Anchor Body zone -->
        <rect x="30" y="85" width="170" height="310" fill="#1e2a1e" stroke="none"/>
        <!-- Conversation items -->
        <rect x="40" y="95" width="150" height="22" fill="#253025" rx="3"/>
        <text x="55" y="110" fill="#4a7a4a" font-size="9">Conversation 1</text>
        <rect x="40" y="122" width="150" height="22" fill="#253025" rx="3"/>
        <text x="55" y="137" fill="#4a7a4a" font-size="9">Conversation 2</text>
        <rect x="40" y="149" width="150" height="22" fill="#253025" rx="3"/>
        <text x="55" y="164" fill="#4a7a4a" font-size="9">Conversation 3</text>
        <rect x="40" y="176" width="150" height="22" fill="#2a3a2a" rx="3"/>
        <text x="55" y="191" fill="#6a9a6a" font-size="9">Conversation 4</text>
        <rect x="40" y="203" width="150" height="22" fill="#253025" rx="3"/>
        <text x="55" y="218" fill="#4a7a4a" font-size="9">Conversation 5</text>
        <rect x="40" y="230" width="150" height="22" fill="#253025" rx="3"/>
        <text x="55" y="245" fill="#4a7a4a" font-size="9">Conversation 6</text>
        <rect x="40" y="257" width="150" height="22" fill="#253025" rx="3"/>
        <text x="55" y="272" fill="#4a7a4a" font-size="9">Conversation 7</text>
        <rect x="40" y="284" width="150" height="22" fill="#253025" rx="3"/>
        <text x="55" y="299" fill="#4a7a4a" font-size="9">Conversation 8</text>
        <rect x="40" y="311" width="150" height="22" fill="#253025" rx="3"/>
        <text x="55" y="326" fill="#4a7a4a" font-size="9">Conversation 9</text>
        <!-- Scroll indicator -->
        <rect x="188" y="95" width="3" height="80" fill="#3a5a3a" rx="2"/>
        <text x="115" y="410" fill="#3a5a3a" font-size="8" text-anchor="middle" font-style="italic">⟵ body scrolls independently ⟶</text>

        <!-- Anchor Footer zone -->
        <rect x="30" y="395" width="170" height="95" fill="#1a2a1a" stroke="#5a8a5a" stroke-width="1" rx="4"/>
        <text x="115" y="414" fill="#5a8a5a" font-size="9" text-anchor="middle" letter-spacing="0.5">ANCHOR FOOTER</text>
        <!-- Invite button -->
        <rect x="40" y="420" width="150" height="24" fill="#253025" stroke="#3a6a3a" stroke-width="1" rx="3"/>
        <text x="115" y="436" fill="#6a9a6a" font-size="9" text-anchor="middle">＋ Invite Team Members</text>
        <!-- User Profile button -->
        <rect x="40" y="450" width="150" height="28" fill="#2a3a2a" stroke="#4a8a4a" stroke-width="1" rx="3"/>
        <circle cx="58" cy="464" r="8" fill="#3a6a3a"/>
        <text x="58" y="468" fill="#5a9a5a" font-size="9" text-anchor="middle">U</text>
        <text x="115" y="468" fill="#7aaa7a" font-size="9" text-anchor="middle">User Profile ↑</text>

        <!-- Drop-up anchored overlay -->
        <rect x="40" y="300" width="155" height="85" fill="#1a2e2a" stroke="#4a8a7a" stroke-width="1.5" rx="4"/>
        <text x="117" y="318" fill="#4a8a7a" font-size="9" text-anchor="middle" letter-spacing="0.5">ANCHORED OVERLAY</text>
        <text x="117" y="332" fill="#3a6a5a" font-size="8" text-anchor="middle">preferred dir: Up</text>
        <rect x="50" y="340" width="135" height="16" fill="#1e3a30" rx="2"/>
        <text x="117" y="352" fill="#4a8a7a" font-size="8" text-anchor="middle">Account settings</text>
        <rect x="50" y="360" width="135" height="16" fill="#1e3a30" rx="2"/>
        <text x="117" y="372" fill="#4a8a7a" font-size="8" text-anchor="middle">Help & Support</text>

        <!-- Header Anchor -->
        <rect x="200" y="30" width="490" height="50" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="4"/>
        <!-- Tab bar -->
        <rect x="215" y="40" width="80" height="28" fill="#2a3a2a" stroke="#4a8a4a" stroke-width="1" rx="3"/>
        <text x="255" y="58" fill="#7aaa7a" font-size="10" text-anchor="middle">Chat</text>
        <rect x="305" y="40" width="80" height="28" fill="#1e2a1e" rx="3"/>
        <text x="345" y="58" fill="#4a7a4a" font-size="10" text-anchor="middle">Cowork</text>
        <rect x="395" y="40" width="80" height="28" fill="#1e2a1e" rx="3"/>
        <text x="435" y="58" fill="#4a7a4a" font-size="10" text-anchor="middle">Code</text>
        <!-- Controller arrow -->
        <text x="520" y="48" fill="#8a7a4a" font-size="8" text-anchor="middle">CONTROLLER</text>
        <text x="520" y="62" fill="#6a5a3a" font-size="8" text-anchor="middle">drives Viewport ↓</text>

        <!-- Main Viewport -->
        <rect x="200" y="80" width="490" height="390" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Conversation bubbles -->
        <rect x="215" y="100" width="300" height="35" fill="#2a2a4a" rx="4"/>
        <text x="230" y="122" fill="#5a5a7a" font-size="9">User message</text>
        <rect x="300" y="150" width="375" height="45" fill="#252535" rx="4"/>
        <text x="320" y="168" fill="#5a5a8a" font-size="9">Claude response...</text>
        <text x="320" y="183" fill="#4a4a7a" font-size="9">...continues here</text>
        <rect x="215" y="210" width="250" height="35" fill="#2a2a4a" rx="4"/>
        <text x="230" y="232" fill="#5a5a7a" font-size="9">Another user message</text>
        <rect x="300" y="260" width="375" height="55" fill="#252535" rx="4"/>
        <text x="320" y="278" fill="#5a5a8a" font-size="9">A longer Claude response that</text>
        <text x="320" y="293" fill="#5a5a8a" font-size="9">spans multiple lines of text</text>
        <text x="320" y="308" fill="#4a4a7a" font-size="9">...still going</text>

        <!-- Scroll indicator for viewport -->
        <rect x="683" y="80" width="3" height="120" fill="#3a3a7a" rx="2"/>

        <!-- Input area at bottom of viewport -->
        <rect x="215" y="390" width="455" height="65" fill="#252535" stroke="#3a3a6a" stroke-width="1" rx="6"/>
        <text x="240" y="427" fill="#4a4a7a" font-size="9" font-style="italic">Type a message...</text>

        <!-- Viewport label -->
        <text x="450" y="360" fill="#3a3a6a" font-size="9" text-anchor="middle" letter-spacing="1">VIEWPORT — Staged Mode, owned scroll</text>

        <!-- ANNOTATIONS -->
        <!-- Chrome annotation -->
        <line x1="700" y1="260" x2="760" y2="260" stroke="#4a5a8a" stroke-width="1" stroke-dasharray="4 3"/>
        <text x="765" y="255" fill="#4a5a8a" font-size="10" font-weight="500">CHROME</text>
        <text x="765" y="270" fill="#3a4a6a" font-size="9">Chrome — full viewport</text>
        <text x="765" y="283" fill="#3a4a6a" font-size="9">overflow: hidden</text>

        <!-- Sidebar annotation -->
        <line x1="20" y1="200" x2="-5" y2="200" stroke="#5a8a5a" stroke-width="1" stroke-dasharray="4 3"/>

        <!-- Header Anchor annotation -->
        <line x1="450" y1="30" x2="450" y2="10" stroke="#5a8a5a" stroke-width="1" stroke-dasharray="4 3"/>

        <!-- Anchored Overlay annotation -->
        <line x1="195" y1="340" x2="760" y2="180" stroke="#4a8a7a" stroke-width="1" stroke-dasharray="4 3"/>
        <text x="765" y="175" fill="#4a8a7a" font-size="10" font-weight="500">ANCHORED OVERLAY</text>
        <text x="765" y="190" fill="#3a6a5a" font-size="9">drop-up, content-initiated</text>
        <text x="765" y="203" fill="#3a6a5a" font-size="9">does not shift layout</text>

        <!-- Anchor zones annotation -->
        <line x1="20" y1="57" x2="5" y2="57" stroke="#5a8a5a" stroke-width="1" stroke-dasharray="4 3"/>
        <line x1="20" y1="240" x2="5" y2="240" stroke="#5a8a5a" stroke-width="1" stroke-dasharray="4 3"/>
        <line x1="20" y1="442" x2="5" y2="442" stroke="#5a8a5a" stroke-width="1" stroke-dasharray="4 3"/>
        <line x1="5" y1="57" x2="5" y2="490" stroke="#3a5a3a" stroke-width="1"/>
        <text x="2" y="57" fill="#4a7a4a" font-size="8" text-anchor="end">Header zone</text>
        <text x="2" y="240" fill="#4a7a4a" font-size="8" text-anchor="end">Body zone</text>
        <text x="2" y="442" fill="#4a7a4a" font-size="8" text-anchor="end">Footer zone</text>

        <!-- Sidebar annotation block -->
        <text x="765" y="320" fill="#5a8a5a" font-size="10" font-weight="500">ANCHOR — SIDEBAR</text>
        <text x="765" y="335" fill="#3a6a3a" font-size="9">Leading, collapsible</text>
        <text x="765" y="348" fill="#3a6a3a" font-size="9">Breakpoint: Lift</text>
        <line x1="700" y1="340" x2="760" y2="340" stroke="#5a8a5a" stroke-width="1" stroke-dasharray="4 3"/>

        <!-- Header annotation block -->
        <text x="765" y="55" fill="#5a8a5a" font-size="10" font-weight="500">ANCHOR — HEADER</text>
        <text x="765" y="70" fill="#3a6a3a" font-size="9">Top, fixed height</text>
        <text x="765" y="83" fill="#3a6a3a" font-size="9">Controller of main Viewport</text>
        <line x1="690" y1="55" x2="760" y2="55" stroke="#5a8a5a" stroke-width="1" stroke-dasharray="4 3"/>

        <!-- Viewport annotation block -->
        <text x="765" y="115" fill="#5a5a8a" font-size="10" font-weight="500">VIEWPORT</text>
        <text x="765" y="130" fill="#3a3a6a" font-size="9">Staged: Chat/Cowork/Code</text>
        <text x="765" y="143" fill="#3a3a6a" font-size="9">Owned scroll per stage</text>
        <line x1="690" y1="130" x2="760" y2="130" stroke="#5a5a8a" stroke-width="1" stroke-dasharray="4 3"/>

        <!-- Anchor footer annotation -->
        <text x="765" y="420" fill="#5a8a5a" font-size="10" font-weight="500">ANCHOR FOOTER</text>
        <text x="765" y="435" fill="#3a6a3a" font-size="9">User Profile → Anchored Overlay</text>
        <text x="765" y="448" fill="#3a6a3a" font-size="9">Invite → Modal Overlay</text>
        <line x1="200" y1="442" x2="760" y2="442" stroke="#5a8a5a" stroke-width="1" stroke-dasharray="4 3"/>

      </svg>
    </div>
    <p class="diagram-caption">Fig 2 — Claude Desktop annotated with SDL region types, zone labels, and behaviours</p>
  </section>

  <hr class="divider">

  <!-- CLAUDE WITH PANEL -->
  <section class="section">
    <div class="section-label">Case Study — Panel State</div>
    <h2>Claude Desktop — With Artifact Panel</h2>
    <h3>Content-initiated Panel injection compresses the main Viewport</h3>
    <p class="section-intro">
      When the user writes code or markdown, a Trailing Panel is injected into the layout. 
      Unlike an Overlay, the Panel participates in the layout — it compresses the Viewport horizontally.
    </p>

    <div class="diagram-container">
      <svg class="diagram-svg" viewBox="0 0 860 380" xmlns="http://www.w3.org/2000/svg">

        <!-- Chrome -->
        <rect x="20" y="20" width="820" height="340" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="2" rx="6"/>

        <!-- Sidebar -->
        <rect x="30" y="30" width="130" height="320" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="4"/>
        <text x="95" y="185" fill="#3a5a3a" font-size="9" text-anchor="middle">sidebar</text>

        <!-- Header -->
        <rect x="170" y="30" width="660" height="40" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="4"/>
        <rect x="185" y="38" width="60" height="22" fill="#2a3a2a" rx="2"/>
        <text x="215" y="53" fill="#7aaa7a" font-size="9" text-anchor="middle">Chat</text>
        <rect x="255" y="38" width="60" height="22" fill="#1e2a1e" rx="2"/>
        <text x="285" y="53" fill="#4a6a4a" font-size="9" text-anchor="middle">Cowork</text>
        <rect x="325" y="38" width="60" height="22" fill="#1e2a1e" rx="2"/>
        <text x="355" y="53" fill="#4a6a4a" font-size="9" text-anchor="middle">Code</text>

        <!-- COMPRESSED Viewport -->
        <rect x="170" y="80" width="330" height="270" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="185" y="95" width="200" height="28" fill="#2a2a4a" rx="3"/>
        <text x="200" y="113" fill="#5a5a7a" font-size="9">User writes code block...</text>
        <rect x="235" y="135" width="250" height="45" fill="#252535" rx="3"/>
        <text x="252" y="153" fill="#5a5a8a" font-size="9">Here's that Python function:</text>
        <rect x="185" y="192" width="295" height="60" fill="#1a1a2a" stroke="#2a2a4a" stroke-width="1" rx="3"/>
        <text x="200" y="210" fill="#6a6a9a" font-size="8" font-family="monospace">def calculate(x, y):</text>
        <text x="208" y="224" fill="#6a6a9a" font-size="8" font-family="monospace">return x + y</text>
        <!-- Input -->
        <rect x="185" y="300" width="295" height="38" fill="#252535" stroke="#3a3a6a" stroke-width="1" rx="4"/>
        <text x="200" y="323" fill="#4a4a7a" font-size="8" font-style="italic">Type a message...</text>
        <!-- Compressed label -->
        <text x="335" y="270" fill="#3a3a5a" font-size="8" text-anchor="middle">← compressed →</text>

        <!-- PANEL -->
        <rect x="510" y="80" width="320" height="270" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="2" rx="4"/>
        <text x="670" y="100" fill="#8a5a5a" font-size="9" text-anchor="middle" letter-spacing="1">PANEL — TRAILING</text>
        <text x="670" y="113" fill="#5a3a3a" font-size="8" text-anchor="middle">content-initiated · compresses Viewport</text>

        <!-- Code preview in panel -->
        <rect x="525" y="125" width="290" height="180" fill="#1a1010" stroke="#3a2020" stroke-width="1" rx="4"/>
        <text x="545" y="145" fill="#6a5a5a" font-size="8" font-family="monospace">▶  Preview</text>
        <text x="545" y="168" fill="#8a6a5a" font-size="11" font-family="monospace">def calculate(x, y):</text>
        <text x="557" y="186" fill="#8a6a5a" font-size="11" font-family="monospace">return x + y</text>
        <text x="545" y="204" fill="#7a5a5a" font-size="11" font-family="monospace">calculate(3, 4)</text>
        <text x="545" y="222" fill="#6a9a6a" font-size="11" font-family="monospace">→ 7</text>

        <!-- Dismiss button -->
        <rect x="790" y="83" width="30" height="22" fill="#3a2020" rx="2"/>
        <text x="805" y="98" fill="#8a5a5a" font-size="10" text-anchor="middle">✕</text>

        <!-- Inject arrow -->
        <line x1="500" y1="215" x2="512" y2="215" stroke="#8a5a5a" stroke-width="2" marker-end="url(#arrow-panel)"/>
        <line x1="490" y1="215" x2="500" y2="215" stroke="#8a5a5a" stroke-width="1" stroke-dasharray="4 3"/>

        <defs>
          <marker id="arrow-panel" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
            <path d="M0,0 L0,6 L6,3 z" fill="#8a5a5a"/>
          </marker>
        </defs>

        <!-- Annotations -->
        <text x="355" y="15" fill="#5a5a8a" font-size="9" text-anchor="middle">Viewport — compressed by Panel injection</text>
        <text x="670" y="15" fill="#8a5a5a" font-size="9" text-anchor="middle">Panel — Trailing, content-initiated trigger</text>

        <!-- Bracket showing compression -->
        <line x1="170" y1="360" x2="500" y2="360" stroke="#5a5a6a" stroke-width="1"/>
        <line x1="170" y1="356" x2="170" y2="364" stroke="#5a5a6a" stroke-width="1"/>
        <line x1="500" y1="356" x2="500" y2="364" stroke="#5a5a6a" stroke-width="1"/>
        <text x="335" y="375" fill="#5a5a6a" font-size="8" text-anchor="middle">Viewport narrows — Panel shares layout space</text>

        <line x1="510" y1="360" x2="830" y2="360" stroke="#6a4a4a" stroke-width="1"/>
        <line x1="510" y1="356" x2="510" y2="364" stroke="#6a4a4a" stroke-width="1"/>
        <line x1="830" y1="356" x2="830" y2="364" stroke="#6a4a4a" stroke-width="1"/>
        <text x="670" y="375" fill="#6a4a4a" font-size="8" text-anchor="middle">Panel occupies this space</text>

      </svg>
    </div>
    <p class="diagram-caption">Fig 3 — Panel injection: the Trailing Panel compresses the main Viewport. Compare with Fig 2 where no Panel is present.</p>
  </section>

  <hr class="divider">

  <!-- NAMED COMPOSITIONS -->
  <section class="section">
    <div class="section-label">Layer 4</div>
    <h2>Named Compositions</h2>
    <h3>Six common shell patterns built from SDL region types</h3>

    <div class="compositions-grid">

      <!-- Workspace -->
      <div class="composition-card">
        <div class="composition-name">Workspace</div>
        <svg viewBox="0 0 200 140" width="100%" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="196" height="136" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
          <rect x="8" y="8" width="52" height="124" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
          <text x="34" y="68" fill="#3a5a3a" font-size="8" text-anchor="middle">ANCHOR</text>
          <text x="34" y="80" fill="#2a4a2a" font-size="7" text-anchor="middle">sidebar</text>
          <rect x="68" y="8" width="124" height="124" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
          <text x="130" y="68" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
          <text x="130" y="80" fill="#2a2a4a" font-size="7" text-anchor="middle">linear or staged</text>
        </svg>
        <div class="diagram-caption" style="margin-top:8px">Claude, VS Code, Slack, Notion</div>
      </div>

      <!-- Workspace + Controller -->
      <div class="composition-card">
        <div class="composition-name">Workspace + Controller</div>
        <svg viewBox="0 0 200 140" width="100%" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="196" height="136" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
          <rect x="8" y="8" width="52" height="124" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
          <text x="34" y="68" fill="#3a5a3a" font-size="8" text-anchor="middle">ANCHOR</text>
          <rect x="68" y="8" width="124" height="28" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
          <rect x="74" y="13" width="28" height="16" fill="#2a3a2a" rx="2"/>
          <text x="88" y="25" fill="#5a8a5a" font-size="7" text-anchor="middle">Tab</text>
          <rect x="106" y="13" width="28" height="16" fill="#1e2a1e" rx="2"/>
          <text x="120" y="25" fill="#3a5a3a" font-size="7" text-anchor="middle">Tab</text>
          <rect x="138" y="13" width="28" height="16" fill="#1e2a1e" rx="2"/>
          <text x="152" y="25" fill="#3a5a3a" font-size="7" text-anchor="middle">Tab</text>
          <text x="180" y="22" fill="#6a5a3a" font-size="6" text-anchor="middle">ctrl</text>
          <rect x="68" y="44" width="124" height="88" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
          <text x="130" y="88" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
          <text x="130" y="100" fill="#2a2a4a" font-size="7" text-anchor="middle">staged mode</text>
          <line x1="130" y1="36" x2="130" y2="44" stroke="#8a7a4a" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arr2)"/>
          <defs>
            <marker id="arr2" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
              <path d="M0,0 L0,4 L4,2 z" fill="#8a7a4a"/>
            </marker>
          </defs>
        </svg>
        <div class="diagram-caption" style="margin-top:8px">Claude (Chat/Cowork/Code tabs)</div>
      </div>

      <!-- Master-Detail -->
      <div class="composition-card">
        <div class="composition-name">Master-Detail</div>
        <svg viewBox="0 0 200 140" width="100%" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="196" height="136" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
          <rect x="8" y="8" width="75" height="124" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
          <text x="45" y="62" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
          <text x="45" y="74" fill="#2a2a4a" font-size="7" text-anchor="middle">master list</text>
          <rect x="25" y="85" width="50" height="12" fill="#2a2a4a" rx="2"/>
          <rect x="25" y="101" width="50" height="12" fill="#252540" rx="2"/>
          <rect x="25" y="117" width="50" height="8" fill="#252540" rx="2"/>
          <rect x="91" y="8" width="101" height="124" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="3"/>
          <text x="141" y="62" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
          <text x="141" y="74" fill="#2a2a4a" font-size="7" text-anchor="middle">detail view</text>
          <line x1="83" y1="70" x2="91" y2="70" stroke="#5a5a7a" stroke-width="1.5" stroke-dasharray="3 2"/>
        </svg>
        <div class="diagram-caption" style="margin-top:8px">Email, file browsers, settings</div>
      </div>

      <!-- Canvas -->
      <div class="composition-card">
        <div class="composition-name">Canvas</div>
        <svg viewBox="0 0 200 140" width="100%" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="196" height="136" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
          <!-- Top toolbar -->
          <rect x="8" y="8" width="184" height="22" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
          <text x="100" y="23" fill="#3a5a3a" font-size="7" text-anchor="middle">ANCHOR — toolbar</text>
          <!-- Left tools -->
          <rect x="8" y="36" width="28" height="88" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
          <text x="22" y="82" fill="#3a5a3a" font-size="7" text-anchor="middle" writing-mode="vertical-rl">tools</text>
          <!-- Right panel -->
          <rect x="162" y="36" width="30" height="88" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
          <text x="177" y="82" fill="#3a5a3a" font-size="7" text-anchor="middle" writing-mode="vertical-rl">props</text>
          <!-- Canvas viewport -->
          <rect x="42" y="36" width="116" height="88" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
          <text x="100" y="78" fill="#3a3a5a" font-size="7" text-anchor="middle">VIEWPORT</text>
          <text x="100" y="90" fill="#2a2a4a" font-size="6" text-anchor="middle">spatial / pan+zoom</text>
          <!-- Bottom -->
          <rect x="8" y="128" width="184" height="6" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        </svg>
        <div class="diagram-caption" style="margin-top:8px">Figma, Miro, Google Maps</div>
      </div>

      <!-- Dashboard -->
      <div class="composition-card">
        <div class="composition-name">Dashboard</div>
        <svg viewBox="0 0 200 140" width="100%" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="196" height="136" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
          <rect x="8" y="8" width="184" height="22" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
          <text x="100" y="23" fill="#3a5a3a" font-size="7" text-anchor="middle">ANCHOR — header</text>
          <rect x="8" y="36" width="184" height="96" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
          <text x="100" y="50" fill="#2a2a4a" font-size="6" text-anchor="middle">VIEWPORT — dashboard scroll</text>
          <!-- Widget grid -->
          <rect x="14" y="56" width="80" height="34" fill="#252535" stroke="#3a3a5a" stroke-width="1" rx="2"/>
          <text x="54" y="76" fill="#4a4a7a" font-size="6" text-anchor="middle">widget</text>
          <rect x="100" y="56" width="86" height="34" fill="#252535" stroke="#3a3a5a" stroke-width="1" rx="2"/>
          <text x="143" y="76" fill="#4a4a7a" font-size="6" text-anchor="middle">widget</text>
          <rect x="14" y="96" width="54" height="30" fill="#252535" stroke="#3a3a5a" stroke-width="1" rx="2"/>
          <text x="41" y="114" fill="#4a4a7a" font-size="6" text-anchor="middle">widget</text>
          <rect x="74" y="96" width="54" height="30" fill="#252535" stroke="#3a3a5a" stroke-width="1" rx="2"/>
          <text x="101" y="114" fill="#4a4a7a" font-size="6" text-anchor="middle">widget</text>
          <rect x="134" y="96" width="52" height="30" fill="#252535" stroke="#3a3a5a" stroke-width="1" rx="2"/>
          <text x="160" y="114" fill="#4a4a7a" font-size="6" text-anchor="middle">widget</text>
        </svg>
        <div class="diagram-caption" style="margin-top:8px">Analytics, monitoring, home screens</div>
      </div>

      <!-- Command -->
      <div class="composition-card">
        <div class="composition-name">Command</div>
        <svg viewBox="0 0 200 140" width="100%" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="196" height="136" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
          <!-- Full viewport -->
          <rect x="8" y="8" width="184" height="124" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
          <text x="100" y="55" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
          <text x="100" y="67" fill="#2a2a4a" font-size="7" text-anchor="middle">full screen</text>
          <!-- Command palette overlay -->
          <rect x="30" y="78" width="140" height="46" fill="#1a2e2a" stroke="#4a8a7a" stroke-width="1.5" rx="4"/>
          <text x="100" y="92" fill="#4a8a7a" font-size="7" text-anchor="middle">ANCHORED OVERLAY</text>
          <text x="100" y="104" fill="#2a5a4a" font-size="6" text-anchor="middle">command palette</text>
          <rect x="36" y="108" width="128" height="10" fill="#1e3a30" rx="2"/>
          <text x="100" y="116" fill="#3a7a5a" font-size="6" text-anchor="middle">⌘K to open...</text>
        </svg>
        <div class="diagram-caption" style="margin-top:8px">Linear, Raycast — keyboard-first</div>
      </div>

    </div>
    <p class="diagram-caption">Fig 4 — The six named compositions of the SDL</p>
  </section>

  <hr class="divider">

  <!-- TRANSITIONS -->
  <section class="section">
    <div class="section-label">Layer 5</div>
    <h2>Transitions</h2>
    <h3>How the shell changes — before and after states</h3>

    <!-- Collapse / Lift -->
    <div class="diagram-container" style="margin-bottom:20px">
      <svg class="diagram-svg" viewBox="0 0 860 200" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="arr-transition" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto">
            <path d="M0,0 L0,8 L8,4 z" fill="#c8a96e"/>
          </marker>
        </defs>

        <!-- COLLAPSE: Before -->
        <text x="110" y="16" fill="#c8a96e" font-size="10" text-anchor="middle" letter-spacing="1">COLLAPSE — before</text>
        <rect x="10" y="25" width="200" height="160" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="18" y="33" width="60" height="144" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <text x="48" y="108" fill="#3a5a3a" font-size="8" text-anchor="middle">ANCHOR</text>
        <text x="48" y="120" fill="#2a4a2a" font-size="7" text-anchor="middle">260px</text>
        <rect x="86" y="33" width="116" height="144" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="144" y="108" fill="#3a3a5a" font-size="7" text-anchor="middle">VIEWPORT</text>

        <!-- Arrow -->
        <line x1="230" y1="105" x2="280" y2="105" stroke="#c8a96e" stroke-width="2" marker-end="url(#arr-transition)"/>
        <text x="255" y="98" fill="#c8a96e" font-size="9" text-anchor="middle">Collapse</text>

        <!-- COLLAPSE: After -->
        <text x="380" y="16" fill="#c8a96e" font-size="10" text-anchor="middle" letter-spacing="1">COLLAPSE — after</text>
        <rect x="290" y="25" width="200" height="160" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="298" y="33" width="22" height="144" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <text x="309" y="108" fill="#3a5a3a" font-size="6" text-anchor="middle" writing-mode="vertical-rl">icons</text>
        <rect x="328" y="33" width="154" height="144" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="405" y="108" fill="#3a3a5a" font-size="7" text-anchor="middle">VIEWPORT expands</text>

        <!-- LIFT: Before -->
        <text x="590" y="16" fill="#7eb8c8" font-size="10" text-anchor="middle" letter-spacing="1">LIFT — after (mobile)</text>
        <rect x="510" y="25" width="200" height="160" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Full viewport -->
        <rect x="518" y="33" width="184" height="144" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="610" y="108" fill="#3a3a5a" font-size="7" text-anchor="middle">VIEWPORT fills Chrome</text>
        <!-- Lifted anchor as overlay -->
        <rect x="518" y="33" width="100" height="144" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="2" rx="3"/>
        <text x="568" y="105" fill="#4a8a4a" font-size="7" text-anchor="middle">ANCHOR</text>
        <text x="568" y="117" fill="#3a6a3a" font-size="6" text-anchor="middle">lifted → Overlay</text>
        <text x="568" y="129" fill="#3a6a3a" font-size="6" text-anchor="middle">drawer behaviour</text>

        <!-- Arrow before lift -->
        <line x1="500" y1="105" x2="510" y2="105" stroke="#7eb8c8" stroke-width="1" stroke-dasharray="4 3"/>
        <line x1="490" y1="105" x2="500" y2="105" stroke="#7eb8c8" stroke-width="2" marker-end="url(#arr-lift)"/>
        <defs>
          <marker id="arr-lift" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto">
            <path d="M0,0 L0,8 L8,4 z" fill="#7eb8c8"/>
          </marker>
        </defs>
        <text x="480" y="98" fill="#7eb8c8" font-size="9" text-anchor="end">Lift</text>

        <!-- Viewport behind -->
        <rect x="720" y="25" width="130" height="160" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1" rx="4"/>
        <rect x="728" y="33" width="114" height="144" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="785" y="108" fill="#2a2a4a" font-size="7" text-anchor="middle">VIEWPORT</text>
        <text x="785" y="120" fill="#2a2a4a" font-size="6" text-anchor="middle">beneath</text>

      </svg>
    </div>

    <!-- Inject / Eject -->
    <div class="diagram-container">
      <svg class="diagram-svg" viewBox="0 0 860 200" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="arr-inject" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto">
            <path d="M0,0 L0,8 L8,4 z" fill="#c87e7e"/>
          </marker>
        </defs>

        <text x="110" y="16" fill="#c87e7e" font-size="10" text-anchor="middle" letter-spacing="1">INJECT — before</text>
        <rect x="10" y="25" width="200" height="160" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="18" y="33" width="44" height="144" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <rect x="70" y="33" width="132" height="144" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="136" y="108" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
        <text x="136" y="120" fill="#2a2a4a" font-size="7" text-anchor="middle">full width</text>

        <line x1="228" y1="105" x2="278" y2="105" stroke="#c87e7e" stroke-width="2" marker-end="url(#arr-inject)"/>
        <text x="253" y="98" fill="#c87e7e" font-size="9" text-anchor="middle">Inject</text>

        <text x="380" y="16" fill="#c87e7e" font-size="10" text-anchor="middle" letter-spacing="1">INJECT — after</text>
        <rect x="290" y="25" width="200" height="160" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="298" y="33" width="44" height="144" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <rect x="350" y="33" width="72" height="144" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="386" y="108" fill="#3a3a5a" font-size="7" text-anchor="middle">VIEWPORT</text>
        <text x="386" y="120" fill="#2a2a4a" font-size="6" text-anchor="middle">compressed</text>
        <rect x="430" y="33" width="52" height="144" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="1.5" rx="3"/>
        <text x="456" y="105" fill="#6a3a3a" font-size="7" text-anchor="middle">PANEL</text>
        <text x="456" y="117" fill="#5a3030" font-size="6" text-anchor="middle">injected</text>

        <!-- Eject -->
        <line x1="504" y1="105" x2="554" y2="105" stroke="#7ec87e" stroke-width="2" marker-end="url(#arr-eject)"/>
        <text x="529" y="98" fill="#7ec87e" font-size="9" text-anchor="middle">Eject</text>
        <defs>
          <marker id="arr-eject" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto">
            <path d="M0,0 L0,8 L8,4 z" fill="#7ec87e"/>
          </marker>
        </defs>

        <text x="660" y="16" fill="#7ec87e" font-size="10" text-anchor="middle" letter-spacing="1">EJECT — after</text>
        <rect x="570" y="25" width="200" height="160" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="578" y="33" width="44" height="144" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <rect x="630" y="33" width="132" height="144" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="696" y="108" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
        <text x="696" y="120" fill="#2a2a4a" font-size="7" text-anchor="middle">expands back</text>

      </svg>
    </div>
    <p class="diagram-caption">Fig 5 — Key transitions: Collapse, Lift (breakpoint response), Inject (Panel appears), Eject (Panel closes)</p>
  </section>

  <hr class="divider">


  <!-- SPATIAL VIEWPORT -->
  <section class="section">
    <div class="section-label">Spatial Viewport</div>
    <h2>Spatial Viewport Mode</h2>
    <h3>A camera over a canvas, not a window over a flow</h3>
    <p class="section-intro">
      The other three Viewport modes — Linear, Staged, Routed — are variations on the same model: content has a position in a one-dimensional flow and the Viewport moves through it.
      A Spatial Viewport breaks this entirely. Content exists in a two-dimensional coordinate space. The Viewport is a camera that pans and zooms over that space.
      This difference is not merely visual — it has structural consequences for navigation, selection, object modelling, and the controller relationships between the Viewport and surrounding regions.
    </p>

    <!-- The four modes compared -->
    <div class="diagram-container">
      <svg class="diagram-svg" viewBox="0 0 900 200" xmlns="http://www.w3.org/2000/svg">

        <text x="10" y="16" fill="#c8a96e" font-size="10" letter-spacing="1">LINEAR</text>
        <rect x="10" y="25" width="185" height="165" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Content flowing down -->
        <rect x="20" y="35" width="165" height="18" fill="#2a2a4a" rx="2"/>
        <rect x="20" y="57" width="165" height="18" fill="#2a2a4a" rx="2"/>
        <rect x="20" y="79" width="165" height="18" fill="#2a2a4a" rx="2"/>
        <rect x="20" y="101" width="165" height="18" fill="#2a2a4a" rx="2"/>
        <!-- Viewport window -->
        <rect x="10" y="70" width="185" height="80" fill="none" stroke="#7eb8c8" stroke-width="2" stroke-dasharray="5 3" rx="4"/>
        <text x="102" y="195" fill="#5a5a8a" font-size="8" text-anchor="middle">window scrolls through flow</text>

        <text x="215" y="16" fill="#c8a96e" font-size="10" letter-spacing="1">STAGED</text>
        <rect x="215" y="25" width="185" height="165" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="225" y="35" width="165" height="145" fill="#2a2a4a" rx="2"/>
        <text x="307" y="112" fill="#4a4a7a" font-size="10" text-anchor="middle">Stage A</text>
        <!-- Swap arrow -->
        <line x1="307" y1="130" x2="307" y2="148" stroke="#7eb8c8" stroke-width="1.5" stroke-dasharray="4 3"/>
        <text x="307" y="165" fill="#3a3a6a" font-size="8" text-anchor="middle">swap on tab select</text>
        <text x="307" y="195" fill="#5a5a8a" font-size="8" text-anchor="middle">discrete states, one visible</text>

        <text x="420" y="16" fill="#c8a96e" font-size="10" letter-spacing="1">ROUTED</text>
        <rect x="420" y="25" width="185" height="165" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="430" y="35" width="165" height="145" fill="#2a2a4a" rx="2"/>
        <text x="512" y="112" fill="#4a4a7a" font-size="10" text-anchor="middle">/dashboard</text>
        <text x="512" y="165" fill="#3a3a6a" font-size="8" text-anchor="middle">URL drives content</text>
        <text x="512" y="195" fill="#5a5a8a" font-size="8" text-anchor="middle">full transition on navigate</text>

        <text x="625" y="16" fill="#7eb8c8" font-size="10" letter-spacing="1">SPATIAL ←</text>
        <rect x="625" y="25" width="265" height="165" fill="#1e1e2e" stroke="#7eb8c8" stroke-width="2" rx="4"/>
        <!-- Canvas objects scattered in 2D space -->
        <rect x="640" y="45" width="60" height="40" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="3"/>
        <text x="670" y="69" fill="#4a4a7a" font-size="8" text-anchor="middle">object</text>
        <rect x="720" y="90" width="80" height="50" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="3"/>
        <text x="760" y="119" fill="#4a4a7a" font-size="8" text-anchor="middle">object</text>
        <rect x="640" y="120" width="50" height="55" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="3"/>
        <text x="665" y="151" fill="#4a4a7a" font-size="8" text-anchor="middle">object</text>
        <rect x="820" y="40" width="55" height="35" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="3"/>
        <text x="847" y="61" fill="#4a4a7a" font-size="8" text-anchor="middle">object</text>
        <!-- Camera viewport -->
        <rect x="695" y="55" width="150" height="115" fill="none" stroke="#7eb8c8" stroke-width="2" stroke-dasharray="5 3" rx="4"/>
        <text x="770" y="75" fill="#4a8a7a" font-size="8" text-anchor="middle">camera</text>
        <!-- Pan arrows -->
        <line x1="762" y1="150" x2="742" y2="150" stroke="#7eb8c8" stroke-width="1.5" marker-end="url(#arr-sp1)"/>
        <line x1="762" y1="150" x2="782" y2="150" stroke="#7eb8c8" stroke-width="1.5" marker-end="url(#arr-sp2)"/>
        <line x1="762" y1="150" x2="762" y2="130" stroke="#7eb8c8" stroke-width="1.5" marker-end="url(#arr-sp3)"/>
        <line x1="762" y1="150" x2="762" y2="170" stroke="#7eb8c8" stroke-width="1.5" marker-end="url(#arr-sp4)"/>
        <defs>
          <marker id="arr-sp1" markerWidth="5" markerHeight="5" refX="2.5" refY="2.5" orient="auto"><path d="M5,0 L5,5 L0,2.5 z" fill="#7eb8c8"/></marker>
          <marker id="arr-sp2" markerWidth="5" markerHeight="5" refX="2.5" refY="2.5" orient="auto"><path d="M0,0 L0,5 L5,2.5 z" fill="#7eb8c8"/></marker>
          <marker id="arr-sp3" markerWidth="5" markerHeight="5" refX="2.5" refY="2.5" orient="auto"><path d="M0,5 L5,5 L2.5,0 z" fill="#7eb8c8"/></marker>
          <marker id="arr-sp4" markerWidth="5" markerHeight="5" refX="2.5" refY="2.5" orient="auto"><path d="M0,0 L5,0 L2.5,5 z" fill="#7eb8c8"/></marker>
        </defs>
        <text x="762" y="195" fill="#4a8a7a" font-size="8" text-anchor="middle">camera pans and zooms over 2D space</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 12 — The four Viewport modes. Linear, Staged, and Routed are all variations on a one-dimensional content flow. Spatial is fundamentally different: the camera moves over a two-dimensional object space.</p>

    <!-- Bidirectional controller -->
    <div class="diagram-container" style="margin-top:20px">
      <svg class="diagram-svg" viewBox="0 0 900 300" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="arr-bidi-fwd" markerWidth="7" markerHeight="7" refX="3.5" refY="3.5" orient="auto">
            <path d="M0,0 L0,7 L7,3.5 z" fill="#c8a96e"/>
          </marker>
          <marker id="arr-bidi-back" markerWidth="7" markerHeight="7" refX="3.5" refY="3.5" orient="auto">
            <path d="M7,0 L7,7 L0,3.5 z" fill="#7eb8c8"/>
          </marker>
          <marker id="arr-bidi-one" markerWidth="7" markerHeight="7" refX="3.5" refY="3.5" orient="auto">
            <path d="M0,0 L0,7 L7,3.5 z" fill="#c8a96e"/>
          </marker>
        </defs>

        <text x="450" y="20" fill="#7a7671" font-size="10" text-anchor="middle" letter-spacing="1">CANVAS SHELL — BIDIRECTIONAL CONTROLLER RELATIONSHIPS</text>

        <!-- Chrome -->
        <rect x="10" y="30" width="880" height="255" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="6"/>

        <!-- Activity bar -->
        <rect x="20" y="40" width="45" height="235" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <text x="42" y="140" fill="#3a5a3a" font-size="7" text-anchor="middle" writing-mode="vertical-rl">ACTIVITY BAR</text>
        <!-- Tool icons -->
        <rect x="27" y="50" width="30" height="28" fill="#2a3a2a" rx="3"/>
        <text x="42" y="68" fill="#5a8a5a" font-size="9" text-anchor="middle">✦</text>
        <rect x="27" y="84" width="30" height="28" fill="#1e2a1e" rx="3"/>
        <text x="42" y="102" fill="#3a5a3a" font-size="9" text-anchor="middle">⬚</text>
        <rect x="27" y="118" width="30" height="28" fill="#1e2a1e" rx="3"/>
        <text x="42" y="136" fill="#3a5a3a" font-size="9" text-anchor="middle">✏</text>
        <text x="42" y="225" fill="#4a6a4a" font-size="7" text-anchor="middle">drives</text>
        <text x="42" y="235" fill="#4a6a4a" font-size="7" text-anchor="middle">Viewport</text>
        <text x="42" y="245" fill="#4a6a4a" font-size="7" text-anchor="middle">tool state</text>
        <text x="42" y="255" fill="#4a6a4a" font-size="7" text-anchor="middle">→ only</text>

        <!-- Top anchor / toolbar -->
        <rect x="70" y="40" width="730" height="35" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <text x="270" y="61" fill="#3a5a3a" font-size="8" text-anchor="middle">TOOLBAR ANCHOR</text>
        <!-- Zoom control -->
        <rect x="660" y="47" width="130" height="22" fill="#2a3a2a" stroke="#4a8a4a" stroke-width="1" rx="3"/>
        <text x="725" y="62" fill="#5a8a5a" font-size="9" text-anchor="middle">75% ↔ zoom control</text>

        <!-- Layers panel -->
        <rect x="70" y="82" width="140" height="193" fill="#1e2a2e" stroke="#5a6a8a" stroke-width="1.5" rx="3"/>
        <text x="140" y="100" fill="#4a5a8a" font-size="8" text-anchor="middle">LAYERS PANEL</text>
        <rect x="80" y="108" width="120" height="18" fill="#2a3a4a" rx="2"/>
        <text x="140" y="121" fill="#5a6a8a" font-size="8" text-anchor="middle">▸ Frame 1</text>
        <rect x="80" y="130" width="120" height="18" fill="#3a4a5a" stroke="#5a6a8a" stroke-width="1" rx="2"/>
        <text x="140" y="143" fill="#7a8aaa" font-size="8" text-anchor="middle">● Circle (selected)</text>
        <rect x="80" y="152" width="120" height="18" fill="#2a3a4a" rx="2"/>
        <text x="140" y="165" fill="#5a6a8a" font-size="8" text-anchor="middle">▸ Frame 2</text>
        <text x="140" y="245" fill="#5a6a7a" font-size="7" text-anchor="middle">BIDIRECTIONAL</text>
        <text x="140" y="256" fill="#4a5a6a" font-size="7" text-anchor="middle">drives ↔ driven by</text>
        <text x="140" y="267" fill="#4a5a6a" font-size="7" text-anchor="middle">Viewport selection</text>

        <!-- Spatial Viewport -->
        <rect x="218" y="82" width="464" height="193" fill="#1e1e2e" stroke="#7eb8c8" stroke-width="2" rx="3"/>
        <text x="450" y="102" fill="#4a8a9a" font-size="9" text-anchor="middle">SPATIAL VIEWPORT</text>
        <!-- Objects on canvas -->
        <rect x="240" y="115" width="130" height="90" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="4"/>
        <text x="305" y="164" fill="#4a4a7a" font-size="8" text-anchor="middle">Frame 1</text>
        <!-- Selected object -->
        <rect x="310" y="130" width="50" height="35" fill="#2a2a5a" stroke="#7eb8c8" stroke-width="2" rx="3"/>
        <text x="335" y="151" fill="#7eb8c8" font-size="8" text-anchor="middle">Circle</text>
        <!-- Selection handle dots -->
        <circle cx="310" cy="130" r="3" fill="#7eb8c8"/>
        <circle cx="360" cy="130" r="3" fill="#7eb8c8"/>
        <circle cx="310" cy="165" r="3" fill="#7eb8c8"/>
        <circle cx="360" cy="165" r="3" fill="#7eb8c8"/>
        <rect x="400" y="115" width="260" height="90" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="4"/>
        <text x="530" y="164" fill="#4a4a7a" font-size="8" text-anchor="middle">Frame 2</text>
        <!-- Minimap -->
        <rect x="598" y="225" width="74" height="42" fill="#151520" stroke="#3a3a6a" stroke-width="1" rx="3"/>
        <rect x="600" y="227" width="70" height="38" fill="#1a1a30" rx="2"/>
        <rect x="610" y="232" width="20" height="14" fill="#252545" rx="1"/>
        <rect x="636" y="232" width="28" height="14" fill="#252545" rx="1"/>
        <rect x="618" y="238" width="8" height="5" fill="#3a3a7a" stroke="#7eb8c8" stroke-width="1" rx="1"/>
        <text x="635" y="258" fill="#3a3a6a" font-size="7" text-anchor="middle">MINIMAP</text>
        <text x="635" y="267" fill="#2a2a5a" font-size="6" text-anchor="middle">Viewport Fixture</text>

        <!-- Properties panel -->
        <rect x="690" y="82" width="190" height="193" fill="#1e2a2e" stroke="#5a6a8a" stroke-width="1.5" rx="3"/>
        <text x="785" y="100" fill="#4a5a8a" font-size="8" text-anchor="middle">PROPERTIES PANEL</text>
        <text x="785" y="114" fill="#3a4a5a" font-size="7" text-anchor="middle">driven by Viewport selection</text>
        <!-- Property fields -->
        <text x="700" y="135" fill="#5a6a7a" font-size="8">X</text>
        <rect x="715" y="125" width="60" height="16" fill="#252535" stroke="#3a3a4a" stroke-width="1" rx="2"/>
        <text x="745" y="137" fill="#5a5a7a" font-size="8" text-anchor="middle">142</text>
        <text x="700" y="157" fill="#5a6a7a" font-size="8">Y</text>
        <rect x="715" y="147" width="60" height="16" fill="#252535" stroke="#3a3a4a" stroke-width="1" rx="2"/>
        <text x="745" y="159" fill="#5a5a7a" font-size="8" text-anchor="middle">88</text>
        <text x="700" y="179" fill="#5a6a7a" font-size="8">W</text>
        <rect x="715" y="169" width="60" height="16" fill="#252535" stroke="#3a3a4a" stroke-width="1" rx="2"/>
        <text x="745" y="181" fill="#5a5a7a" font-size="8" text-anchor="middle">50</text>
        <text x="700" y="201" fill="#5a6a7a" font-size="8">Fill</text>
        <rect x="715" y="191" width="16" height="16" fill="#2a2a5a" stroke="#5a5a8a" stroke-width="1" rx="2"/>
        <text x="785" y="248" fill="#4a5a6a" font-size="7" text-anchor="middle">driven by selection</text>
        <text x="785" y="259" fill="#4a5a6a" font-size="7" text-anchor="middle">only → no drives</text>

        <!-- Arrows: activity bar → viewport -->
        <line x1="65" y1="90" x2="218" y2="145" stroke="#c8a96e" stroke-width="1.5" marker-end="url(#arr-bidi-fwd)" stroke-dasharray="5 3"/>
        <text x="140" y="125" fill="#8a6a2e" font-size="7" text-anchor="middle">tool state →</text>

        <!-- Arrows: layers ↔ viewport (bidirectional) -->
        <line x1="210" y1="143" x2="218" y2="143" stroke="#c8a96e" stroke-width="2" marker-end="url(#arr-bidi-fwd)"/>
        <line x1="218" y1="155" x2="210" y2="155" stroke="#7eb8c8" stroke-width="2" marker-end="url(#arr-bidi-back)"/>
        <text x="213" y="138" fill="#c8a96e" font-size="6" text-anchor="middle">→</text>
        <text x="213" y="163" fill="#7eb8c8" font-size="6" text-anchor="middle">←</text>

        <!-- Arrows: viewport → properties (one way) -->
        <line x1="682" y1="148" x2="690" y2="148" stroke="#7eb8c8" stroke-width="2" marker-end="url(#arr-bidi-back)"/>
        <text x="686" y="143" fill="#7eb8c8" font-size="6" text-anchor="middle">←</text>

        <!-- Arrows: zoom control ↔ viewport -->
        <line x1="725" y1="75" x2="500" y2="82" stroke="#c8a96e" stroke-width="1.5" marker-end="url(#arr-bidi-fwd)" stroke-dasharray="5 3"/>
        <line x1="500" y1="82" x2="680" y2="75" stroke="#7eb8c8" stroke-width="1.5" marker-end="url(#arr-bidi-back)" stroke-dasharray="5 3"/>

        <!-- Legend for arrows -->
        <line x1="230" y1="286" x2="260" y2="286" stroke="#c8a96e" stroke-width="2" marker-end="url(#arr-bidi-one)"/>
        <text x="265" y="290" fill="#7a7671" font-size="9">drives Viewport</text>
        <line x1="390" y1="286" x2="420" y2="286" stroke="#7eb8c8" stroke-width="2" marker-end="url(#arr-bidi-back)"/>
        <text x="425" y="290" fill="#7a7671" font-size="9">driven by Viewport</text>
        <line x1="580" y1="286" x2="610" y2="286" stroke="#c8a96e" stroke-width="2" marker-end="url(#arr-bidi-one)"/>
        <line x1="610" y1="280" x2="580" y2="280" stroke="#7eb8c8" stroke-width="2" marker-end="url(#arr-bidi-back)"/>
        <text x="615" y="290" fill="#7a7671" font-size="9">bidirectional</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 13 — Canvas shell bidirectional controller relationships. Gold arrows: region drives Viewport. Blue arrows: Viewport drives region. Layers Panel has a bidirectional relationship. Properties Panel is driven only. Activity bar drives only. The minimap is a Viewport Fixture — persistent within the Viewport, not a separate region.</p>

    <!-- Object models -->
    <div class="diagram-container" style="margin-top:20px">
      <svg class="diagram-svg" viewBox="0 0 900 220" xmlns="http://www.w3.org/2000/svg">
        <text x="450" y="16" fill="#7a7671" font-size="10" text-anchor="middle" letter-spacing="1">SPATIAL OBJECT MODELS</text>

        <!-- Free-form -->
        <text x="100" y="36" fill="#c8a96e" font-size="9" text-anchor="middle" letter-spacing="1">FREE-FORM</text>
        <rect x="10" y="44" width="180" height="155" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="30" y="60" width="55" height="40" fill="#252545" stroke="#4a4a7a" stroke-width="1" rx="3"/>
        <text x="57" y="83" fill="#4a4a7a" font-size="8" text-anchor="middle">shape</text>
        <rect x="110" y="90" width="65" height="30" fill="#252545" stroke="#4a4a7a" stroke-width="1" rx="3"/>
        <text x="142" y="109" fill="#4a4a7a" font-size="8" text-anchor="middle">text</text>
        <rect x="45" y="130" width="80" height="55" fill="#252545" stroke="#4a4a7a" stroke-width="1" rx="3"/>
        <text x="85" y="161" fill="#4a4a7a" font-size="8" text-anchor="middle">image</text>
        <text x="100" y="210" fill="#4a4a6a" font-size="7" text-anchor="middle">Miro, whiteboards</text>

        <!-- Node graph -->
        <text x="320" y="36" fill="#c8a96e" font-size="9" text-anchor="middle" letter-spacing="1">NODE GRAPH</text>
        <rect x="230" y="44" width="180" height="155" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="244" y="65" width="60" height="32" fill="#252545" stroke="#4a4a7a" stroke-width="1" rx="3"/>
        <text x="274" y="84" fill="#5a5a8a" font-size="8" text-anchor="middle">Node A</text>
        <rect x="244" y="130" width="60" height="32" fill="#252545" stroke="#4a4a7a" stroke-width="1" rx="3"/>
        <text x="274" y="149" fill="#5a5a8a" font-size="8" text-anchor="middle">Node B</text>
        <rect x="336" y="97" width="60" height="32" fill="#252545" stroke="#4a4a7a" stroke-width="1" rx="3"/>
        <text x="366" y="116" fill="#5a5a8a" font-size="8" text-anchor="middle">Node C</text>
        <!-- Edges -->
        <line x1="304" y1="81" x2="336" y2="110" stroke="#5a5a8a" stroke-width="1.5"/>
        <line x1="304" y1="146" x2="336" y2="118" stroke="#5a5a8a" stroke-width="1.5"/>
        <circle cx="304" cy="81" r="4" fill="#5a5a8a"/>
        <circle cx="336" cy="110" r="4" fill="#5a5a8a"/>
        <circle cx="304" cy="146" r="4" fill="#5a5a8a"/>
        <circle cx="336" cy="118" r="4" fill="#5a5a8a"/>
        <text x="320" y="210" fill="#4a4a6a" font-size="7" text-anchor="middle">Node-RED, Unreal Blueprint</text>

        <!-- Frame-based -->
        <text x="550" y="36" fill="#c8a96e" font-size="9" text-anchor="middle" letter-spacing="1">FRAME-BASED</text>
        <rect x="460" y="44" width="180" height="155" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Frame 1 -->
        <rect x="472" y="58" width="75" height="125" fill="#1a1a2e" stroke="#4a4a7a" stroke-width="1.5" rx="2"/>
        <text x="509" y="72" fill="#4a4a7a" font-size="7" text-anchor="middle">Frame 1</text>
        <rect x="480" y="78" width="59" height="35" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="2"/>
        <rect x="480" y="118" width="59" height="55" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="2"/>
        <!-- Frame 2 -->
        <rect x="556" y="58" width="75" height="125" fill="#1a1a2e" stroke="#4a4a7a" stroke-width="1.5" rx="2"/>
        <text x="593" y="72" fill="#4a4a7a" font-size="7" text-anchor="middle">Frame 2</text>
        <rect x="564" y="78" width="59" height="90" fill="#252545" stroke="#3a3a6a" stroke-width="1" rx="2"/>
        <text x="540" y="210" fill="#4a4a6a" font-size="7" text-anchor="middle">Figma, Sketch</text>

        <!-- Tile-based -->
        <text x="780" y="36" fill="#c8a96e" font-size="9" text-anchor="middle" letter-spacing="1">TILE-BASED</text>
        <rect x="690" y="44" width="200" height="155" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Grid -->
        <line x1="726" y1="58" x2="726" y2="188" stroke="#3a3a5a" stroke-width="0.5"/>
        <line x1="762" y1="58" x2="762" y2="188" stroke="#3a3a5a" stroke-width="0.5"/>
        <line x1="798" y1="58" x2="798" y2="188" stroke="#3a3a5a" stroke-width="0.5"/>
        <line x1="834" y1="58" x2="834" y2="188" stroke="#3a3a5a" stroke-width="0.5"/>
        <line x1="700" y1="93" x2="880" y2="93" stroke="#3a3a5a" stroke-width="0.5"/>
        <line x1="700" y1="128" x2="880" y2="128" stroke="#3a3a5a" stroke-width="0.5"/>
        <line x1="700" y1="163" x2="880" y2="163" stroke="#3a3a5a" stroke-width="0.5"/>
        <!-- Filled tiles -->
        <rect x="727" y="59" width="35" height="34" fill="#2a2a4a" rx="1"/>
        <rect x="763" y="59" width="35" height="34" fill="#2a2a4a" rx="1"/>
        <rect x="763" y="94" width="35" height="34" fill="#2a2a4a" rx="1"/>
        <rect x="799" y="94" width="35" height="34" fill="#2a2a4a" rx="1"/>
        <rect x="727" y="129" width="35" height="34" fill="#2a2a4a" rx="1"/>
        <text x="780" y="210" fill="#4a4a6a" font-size="7" text-anchor="middle">Maps, strategy, grid editors</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 14 — The four Spatial object models. Free-form: objects anywhere. Node graph: objects connected by edges. Frame-based: objects within named artboards. Tile-based: objects occupy cells in a discrete grid.</p>

    <!-- Figma SDL description -->
    <h3 style="margin-top:40px; margin-bottom:16px">Example: Figma</h3>
    <div class="sdl-description">
      <span class="keyword">Canvas</span> pattern.<br><br>

      <span class="keyword">Leading Anchor</span>: activity bar, <span class="value">fixed 48px</span>, drives Viewport tool state <span class="value">→ only</span>.<br><br>

      <span class="keyword">Leading Panel Group</span>, policy: <span class="value">Exclusive</span>, <span class="value">resizable width</span>.<br>
      &nbsp;&nbsp;Contains: Layers Panel (<span class="value">bidirectional controller</span> — drives and is driven by Viewport selection), Assets Panel (user-initiated).<br><br>

      <span class="keyword">Top Anchor</span>: toolbar, <span class="value">fixed height</span>. Contains: zoom control (<span class="value">bidirectional controller</span> — drives and reflects Viewport camera state).<br><br>

      <span class="keyword">Main Viewport</span>: <span class="value">Spatial mode</span>.<br>
      &nbsp;&nbsp;Object model: <span class="value">frame-based</span>.<br>
      &nbsp;&nbsp;Selection model: <span class="value">multi + hierarchical</span>.<br>
      &nbsp;&nbsp;Navigation: <span class="value">pan, zoom, fit-to-screen, zoom-to-selection</span>.<br>
      &nbsp;&nbsp;<span class="keyword">Viewport Fixture</span>: Minimap, <span class="value">bottom-right corner</span>, user-toggleable.<br><br>

      <span class="keyword">Trailing Panel Group</span>, policy: <span class="value">Exclusive</span>, <span class="value">fixed width 240px</span>.<br>
      &nbsp;&nbsp;Contains: Design Panel, Prototype Panel, Inspect Panel (all <span class="value">driven by Viewport selection only</span>).<br><br>

      <span class="keyword">Bidirectional controllers</span>: Layers Panel ↔ Viewport selection; zoom control ↔ Viewport camera state.<br><br>

      <span class="keyword">Chrome corner ownership</span>: <span class="value">Top Anchor owns full width</span>.
    </div>
    <p class="diagram-caption" style="margin-top:12px">Fig 15 — SDL description of Figma. Note the explicit declaration of bidirectional controllers, the Spatial Viewport properties, and the Viewport Fixture.</p>
  </section>

  <hr class="divider">


  <!-- ANCHOR SPAN + ANCHOR-TO-ANCHOR -->
  <section class="section">
    <div class="section-label">Anchor Span &amp; Anchor-to-Anchor Controllers</div>
    <h2>How Anchors Relate to Each Other</h2>
    <h3>Span determines the root grid. Toggle buttons create cross-Anchor controller relationships.</h3>
    <p class="section-intro">
      The SDL previously described Anchors in isolation — their position, dimension, and persistence. 
      But when two Anchors occupy perpendicular axes (a top header and a leading sidebar), they must 
      negotiate who owns the corner between them. And when a button in one Anchor controls the collapse 
      state of another, that cross-region wiring must be named explicitly.
    </p>

    <!-- Anchor Span: header-dominant vs sidebar-dominant -->
    <div class="diagram-container">
      <svg class="diagram-svg" viewBox="0 0 900 280" xmlns="http://www.w3.org/2000/svg">

        <text x="200" y="18" fill="#c8a96e" font-size="11" text-anchor="middle" letter-spacing="1">HEADER-DOMINANT</text>
        <text x="200" y="32" fill="#7a7671" font-size="9" text-anchor="middle">Top Anchor full-span · Leading Anchor inset</text>

        <!-- Chrome A -->
        <rect x="10" y="42" width="380" height="225" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="5"/>

        <!-- Top Anchor FULL SPAN -->
        <rect x="18" y="50" width="364" height="44" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="2" rx="3"/>
        <text x="200" y="68" fill="#5a8a5a" font-size="9" text-anchor="middle" letter-spacing="0.5">TOP ANCHOR — FULL-SPAN</text>
        <text x="200" y="82" fill="#3a6a3a" font-size="8" text-anchor="middle">runs edge to edge across entire Chrome</text>
        <!-- Sidebar toggle button in header -->
        <rect x="26" y="57" width="28" height="28" fill="#2a3a2a" stroke="#4a8a4a" stroke-width="1" rx="3"/>
        <line x1="31" y1="65" x2="48" y2="65" stroke="#6a9a6a" stroke-width="1.5"/>
        <line x1="31" y1="71" x2="48" y2="71" stroke="#6a9a6a" stroke-width="1.5"/>
        <line x1="31" y1="77" x2="48" y2="77" stroke="#6a9a6a" stroke-width="1.5"/>

        <!-- Leading Anchor INSET - starts below header -->
        <rect x="18" y="102" width="80" height="157" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="3"/>
        <text x="58" y="178" fill="#3a5a3a" font-size="8" text-anchor="middle" writing-mode="vertical-rl">LEADING ANCHOR — INSET</text>

        <!-- Viewport -->
        <rect x="106" y="102" width="276" height="157" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="244" y="183" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>

        <!-- Corner highlight -->
        <rect x="18" y="94" width="80" height="8" fill="#a07ec8" opacity="0.4" rx="1"/>
        <text x="58" y="115" fill="#a07ec8" font-size="7" text-anchor="middle">↑ corner owned</text>
        <text x="58" y="125" fill="#a07ec8" font-size="7" text-anchor="middle">by Top Anchor</text>

        <!-- Bracket: header spans full width -->
        <line x1="18" y1="38" x2="382" y2="38" stroke="#5a8a5a" stroke-width="1.5"/>
        <line x1="18" y1="34" x2="18" y2="42" stroke="#5a8a5a" stroke-width="1.5"/>
        <line x1="382" y1="34" x2="382" y2="42" stroke="#5a8a5a" stroke-width="1.5"/>
        <text x="200" y="28" fill="#5a8a5a" font-size="8" text-anchor="middle">← full Chrome width →</text>

        <!-- SIDEBAR-DOMINANT -->
        <text x="680" y="18" fill="#7eb8c8" font-size="11" text-anchor="middle" letter-spacing="1">SIDEBAR-DOMINANT</text>
        <text x="680" y="32" fill="#7a7671" font-size="9" text-anchor="middle">Leading Anchor full-span · Top Anchor inset</text>

        <!-- Chrome B -->
        <rect x="490" y="42" width="380" height="225" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="5"/>

        <!-- Leading Anchor FULL SPAN - runs full height -->
        <rect x="498" y="50" width="80" height="209" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="2" rx="3"/>
        <text x="538" y="153" fill="#3a5a3a" font-size="8" text-anchor="middle" writing-mode="vertical-rl">LEADING ANCHOR — FULL-SPAN</text>

        <!-- Top Anchor INSET - starts to the right of sidebar -->
        <rect x="586" y="50" width="276" height="44" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="3"/>
        <text x="724" y="68" fill="#4a7a4a" font-size="9" text-anchor="middle" letter-spacing="0.5">TOP ANCHOR — INSET</text>
        <text x="724" y="82" fill="#2a5a2a" font-size="8" text-anchor="middle">fills only remaining width</text>

        <!-- Viewport -->
        <rect x="586" y="102" width="276" height="157" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="724" y="183" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>

        <!-- Corner highlight -->
        <rect x="498" y="50" width="88" height="44" fill="#a07ec8" opacity="0.3" rx="1"/>
        <text x="538" y="248" fill="#a07ec8" font-size="7" text-anchor="middle">corner owned</text>
        <text x="538" y="258" fill="#a07ec8" font-size="7" text-anchor="middle">by Leading Anchor</text>

        <!-- Bracket: sidebar spans full height -->
        <line x1="484" y1="50" x2="484" y2="259" stroke="#5a8a5a" stroke-width="1.5"/>
        <line x1="480" y1="50" x2="488" y2="50" stroke="#5a8a5a" stroke-width="1.5"/>
        <line x1="480" y1="259" x2="488" y2="259" stroke="#5a8a5a" stroke-width="1.5"/>
        <text x="478" y="157" fill="#5a8a5a" font-size="8" text-anchor="middle" writing-mode="vertical-rl">← full Chrome height →</text>

        <!-- Key difference callout -->
        <text x="450" y="145" fill="#7a7671" font-size="9" text-anchor="middle">vs</text>
        <text x="450" y="163" fill="#5a5650" font-size="8" text-anchor="middle">CSS Grid</text>
        <text x="450" y="175" fill="#5a5650" font-size="8" text-anchor="middle">differs</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 16 — Anchor Span. Left: header-dominant — Top Anchor is full-span, sidebar toggle naturally lives in the header and spans the full width. Right: sidebar-dominant — Leading Anchor is full-span, no natural full-width location for a sidebar toggle in the header.</p>

    <!-- Anchor-to-Anchor controller relationship -->
    <div class="diagram-container" style="margin-top:20px">
      <svg class="diagram-svg" viewBox="0 0 900 300" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="arr-a2a" markerWidth="7" markerHeight="7" refX="3.5" refY="3.5" orient="auto">
            <path d="M0,0 L0,7 L7,3.5 z" fill="#c8a96e"/>
          </marker>
          <marker id="arr-a2a-blue" markerWidth="7" markerHeight="7" refX="3.5" refY="3.5" orient="auto">
            <path d="M0,0 L0,7 L7,3.5 z" fill="#7eb8c8"/>
          </marker>
        </defs>

        <text x="450" y="18" fill="#7a7671" font-size="10" text-anchor="middle" letter-spacing="1">ANCHOR-TO-ANCHOR CONTROLLER — SIDEBAR TOGGLE PATTERN</text>

        <!-- STATE: Expanded -->
        <text x="200" y="36" fill="#c8a96e" font-size="10" text-anchor="middle">Expanded state</text>

        <!-- Chrome expanded -->
        <rect x="10" y="44" width="380" height="244" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="5"/>

        <!-- Top Anchor full-span -->
        <rect x="18" y="52" width="364" height="44" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="3"/>

        <!-- Toggle button — EXPANDED state -->
        <rect x="26" y="60" width="28" height="28" fill="#2a3a2a" stroke="#4a8a4a" stroke-width="1.5" rx="3"/>
        <line x1="31" y1="68" x2="48" y2="68" stroke="#6a9a6a" stroke-width="1.5"/>
        <line x1="31" y1="74" x2="48" y2="74" stroke="#6a9a6a" stroke-width="1.5"/>
        <line x1="31" y1="80" x2="48" y2="80" stroke="#6a9a6a" stroke-width="1.5"/>
        <text x="40" y="96" fill="#4a8a4a" font-size="7" text-anchor="middle">expanded icon</text>

        <!-- Tab bar in header -->
        <rect x="68" y="60" width="50" height="28" fill="#2a3a2a" rx="2"/>
        <text x="93" y="78" fill="#5a8a5a" font-size="8" text-anchor="middle">Chat</text>
        <rect x="122" y="60" width="50" height="28" fill="#1e2a1e" rx="2"/>
        <text x="147" y="78" fill="#3a6a3a" font-size="8" text-anchor="middle">Cowork</text>

        <!-- Leading Anchor EXPANDED -->
        <rect x="18" y="104" width="100" height="176" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="3"/>
        <text x="68" y="190" fill="#3a5a3a" font-size="8" text-anchor="middle">SIDEBAR</text>
        <text x="68" y="203" fill="#2a4a2a" font-size="7" text-anchor="middle">expanded</text>
        <text x="68" y="215" fill="#2a4a2a" font-size="7" text-anchor="middle">260px</text>

        <!-- Viewport expanded -->
        <rect x="126" y="104" width="256" height="176" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="254" y="190" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>

        <!-- Anchor-to-Anchor arrow: toggle → sidebar -->
        <line x1="40" y1="96" x2="40" y2="104" stroke="#c8a96e" stroke-width="2" marker-end="url(#arr-a2a)" stroke-dasharray="4 3"/>
        <text x="75" y="101" fill="#8a6a2e" font-size="8">A→A controller drives collapse state</text>

        <!-- STATE: Collapsed (after click) -->
        <text x="680" y="36" fill="#7eb8c8" font-size="10" text-anchor="middle">Collapsed state (after toggle click)</text>

        <!-- Chrome collapsed -->
        <rect x="490" y="44" width="380" height="244" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="5"/>

        <!-- Top Anchor still full-span -->
        <rect x="498" y="52" width="364" height="44" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="3"/>

        <!-- Toggle button — COLLAPSED state (icon changes) -->
        <rect x="506" y="60" width="28" height="28" fill="#2a3a2a" stroke="#4a8a4a" stroke-width="1.5" rx="3"/>
        <!-- Collapsed icon variant (arrow pointing right) -->
        <line x1="511" y1="68" x2="528" y2="68" stroke="#6a9a6a" stroke-width="1.5"/>
        <line x1="511" y1="74" x2="522" y2="74" stroke="#6a9a6a" stroke-width="1.5"/>
        <line x1="511" y1="80" x2="528" y2="80" stroke="#6a9a6a" stroke-width="1.5"/>
        <polygon points="524,65 530,74 524,83" fill="#6a9a6a"/>
        <text x="520" y="96" fill="#4a8a4a" font-size="7" text-anchor="middle">icon reflects state</text>

        <!-- Tab bar -->
        <rect x="548" y="60" width="50" height="28" fill="#2a3a2a" rx="2"/>
        <text x="573" y="78" fill="#5a8a5a" font-size="8" text-anchor="middle">Chat</text>
        <rect x="602" y="60" width="50" height="28" fill="#1e2a1e" rx="2"/>
        <text x="627" y="78" fill="#3a6a3a" font-size="8" text-anchor="middle">Cowork</text>

        <!-- Leading Anchor COLLAPSED — icon-only width -->
        <rect x="498" y="104" width="28" height="176" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1.5" rx="3"/>
        <!-- Icon dots -->
        <circle cx="512" cy="130" r="4" fill="#3a5a3a"/>
        <circle cx="512" cy="148" r="4" fill="#3a5a3a"/>
        <circle cx="512" cy="166" r="4" fill="#3a5a3a"/>
        <text x="512" y="210" fill="#2a4a2a" font-size="6" text-anchor="middle">icons</text>
        <text x="512" y="220" fill="#2a4a2a" font-size="6" text-anchor="middle">only</text>

        <!-- Viewport expanded to fill -->
        <rect x="534" y="104" width="336" height="176" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="702" y="190" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT expands</text>

        <!-- Anchor-to-Anchor arrow: toggle → sidebar -->
        <line x1="520" y1="96" x2="512" y2="104" stroke="#7eb8c8" stroke-width="2" marker-end="url(#arr-a2a-blue)" stroke-dasharray="4 3"/>

        <!-- Bracket showing width difference -->
        <line x1="498" y1="286" x2="526" y2="286" stroke="#5a8a5a" stroke-width="1"/>
        <line x1="498" y1="282" x2="498" y2="290" stroke="#5a8a5a" stroke-width="1"/>
        <line x1="526" y1="282" x2="526" y2="290" stroke="#5a8a5a" stroke-width="1"/>
        <text x="512" y="299" fill="#3a5a3a" font-size="7" text-anchor="middle">28px</text>

        <!-- vs expanded bracket -->
        <line x1="18" y1="286" x2="118" y2="286" stroke="#5a8a5a" stroke-width="1"/>
        <line x1="18" y1="282" x2="18" y2="290" stroke="#5a8a5a" stroke-width="1"/>
        <line x1="118" y1="282" x2="118" y2="290" stroke="#5a8a5a" stroke-width="1"/>
        <text x="68" y="299" fill="#3a5a3a" font-size="7" text-anchor="middle">260px expanded</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 17 — Anchor-to-Anchor controller relationship. The toggle button in the Top Anchor drives the collapse state of the Leading Anchor. The button icon reflects current state. The Viewport expands to fill reclaimed space. This cross-region wiring must be explicitly named in the SDL description — it is a common source of implementation bugs when left implicit.</p>

    <!-- CSS Grid implication -->
    <div class="diagram-container" style="margin-top:20px">
      <svg class="diagram-svg" viewBox="0 0 900 200" xmlns="http://www.w3.org/2000/svg">
        <text x="450" y="16" fill="#7a7671" font-size="10" text-anchor="middle" letter-spacing="1">CSS GRID IMPLICATION — WHY ANCHOR SPAN MATTERS STRUCTURALLY</text>

        <!-- Header-dominant grid -->
        <text x="200" y="36" fill="#c8a96e" font-size="9" text-anchor="middle">Header-dominant Chrome grid</text>
        <rect x="10" y="44" width="380" height="145" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Grid lines -->
        <line x1="110" y1="44" x2="110" y2="189" stroke="#3a3a5a" stroke-width="0.5" stroke-dasharray="4 3"/>
        <line x1="10" y1="90" x2="390" y2="90" stroke="#3a3a5a" stroke-width="0.5" stroke-dasharray="4 3"/>
        <!-- Header spans both columns -->
        <rect x="18" y="52" width="364" height="30" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="2"/>
        <text x="200" y="71" fill="#3a5a3a" font-size="8" text-anchor="middle">header — grid-column: 1 / -1</text>
        <!-- Sidebar -->
        <rect x="18" y="90" width="84" height="91" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="2"/>
        <text x="60" y="139" fill="#2a4a2a" font-size="7" text-anchor="middle">sidebar</text>
        <!-- Viewport -->
        <rect x="110" y="90" width="272" height="91" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="2"/>
        <text x="246" y="139" fill="#2a2a4a" font-size="7" text-anchor="middle">viewport</text>
        <!-- Code annotation -->
        <text x="200" y="175" fill="#4a4a6a" font-size="8" text-anchor="middle" font-family="monospace">grid-template-rows: [header] auto [content] 1fr</text>
        <text x="200" y="187" fill="#4a4a6a" font-size="8" text-anchor="middle" font-family="monospace">grid-template-columns: [sidebar] 260px [main] 1fr</text>

        <!-- Sidebar-dominant grid -->
        <text x="680" y="36" fill="#7eb8c8" font-size="9" text-anchor="middle">Sidebar-dominant Chrome grid</text>
        <rect x="490" y="44" width="380" height="145" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Grid lines -->
        <line x1="590" y1="44" x2="590" y2="189" stroke="#3a3a5a" stroke-width="0.5" stroke-dasharray="4 3"/>
        <line x1="590" y1="90" x2="870" y2="90" stroke="#3a3a5a" stroke-width="0.5" stroke-dasharray="4 3"/>
        <!-- Sidebar spans both rows -->
        <rect x="498" y="52" width="84" height="129" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="2"/>
        <text x="540" y="120" fill="#3a5a3a" font-size="7" text-anchor="middle" writing-mode="vertical-rl">sidebar — grid-row: 1 / -1</text>
        <!-- Header inset -->
        <rect x="590" y="52" width="272" height="30" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="2"/>
        <text x="726" y="71" fill="#2a4a2a" font-size="8" text-anchor="middle">header (inset)</text>
        <!-- Viewport -->
        <rect x="590" y="90" width="272" height="91" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="2"/>
        <text x="726" y="139" fill="#2a2a4a" font-size="7" text-anchor="middle">viewport</text>
        <!-- Code annotation -->
        <text x="680" y="175" fill="#4a4a6a" font-size="8" text-anchor="middle" font-family="monospace">grid-template-rows: [header] auto [content] 1fr</text>
        <text x="680" y="187" fill="#4a4a6a" font-size="8" text-anchor="middle" font-family="monospace">grid-template-columns: [sidebar] 260px [main] 1fr</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 18 — The CSS Grid structure of the Chrome differs based on Anchor Span. In header-dominant, the header uses grid-column: 1 / -1 to span the full width. In sidebar-dominant, the sidebar uses grid-row: 1 / -1 to span the full height. Both use the same two CSS properties but applied to different Anchors — the SDL description tells the developer exactly which to use.</p>

    <!-- Updated Claude Desktop SDL description -->
    <h3 style="margin-top:40px; margin-bottom:16px">Claude Desktop — Updated SDL Description</h3>
    <div class="sdl-description">
      <span class="keyword">Workspace</span> pattern with <span class="keyword">Controller</span>.<br>
      <span class="keyword">Chrome Anchor Span</span>: Top Anchor <span class="value">full-span</span>, Leading Anchor <span class="value">inset</span>.<br><br>

      <span class="keyword">Top Anchor</span>: header, <span class="value">fixed height</span>, <span class="value">full-span</span>.<br>
      &nbsp;&nbsp;Contains: sidebar toggle button (<span class="keyword">Anchor-to-Anchor controller</span> of Leading Anchor collapse state, <span class="value">reflects collapse state visually</span>).<br>
      &nbsp;&nbsp;Contains: tab bar (<span class="keyword">Controller</span> of main Viewport).<br><br>

      <span class="keyword">Leading Anchor</span>: sidebar, <span class="value">collapsible</span>, <span class="value">inset</span> (starts below header), breakpoint response: <span class="value">Lift</span>.<br>
      &nbsp;&nbsp;<span class="keyword">Anchor Header</span>: workspace switcher.<br>
      &nbsp;&nbsp;<span class="keyword">Anchor Body</span>: conversation list, <span class="value">owned scroll</span>.<br>
      &nbsp;&nbsp;<span class="keyword">Anchor Footer</span>: User Profile trigger (<span class="value">Anchored Overlay</span>, preferred direction <span class="value">Up</span>), Invite action (<span class="value">Modal Overlay</span>).<br><br>

      <span class="keyword">Main Viewport</span>: <span class="value">Staged mode</span>, three stages (Chat, Cowork, Code), owned vertical scroll per stage.<br><br>

      <span class="keyword">Trailing Panel</span>: <span class="value">content-initiated trigger</span> (artifact content type), fixed width, compresses main Viewport on <span class="value">Inject</span>, user-dismissible via <span class="value">Eject</span>.
    </div>
    <p class="diagram-caption" style="margin-top:12px">Fig 19 — Updated Claude Desktop SDL description, now including Anchor Span declarations and the Anchor-to-Anchor controller relationship for the sidebar toggle.</p>
  </section>

  <hr class="divider">

  <!-- PANEL GROUPS -->
  <section class="section">
    <div class="section-label">Panel Groups</div>
    <h2>Multiple Simultaneous Panels</h2>
    <h3>Panel Groups, Panel Policy, and Corner Ownership</h3>
    <p class="section-intro">
      A single Panel compressing a single Viewport is straightforward. When multiple Panels are active simultaneously — 
      on the same edge or on different edges — three new concepts govern the behaviour: Panel Group, Panel Policy, and Corner Ownership.
    </p>

    <!-- Panel Policy diagram -->
    <div class="diagram-container">
      <svg class="diagram-svg" viewBox="0 0 900 260" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="arr-pg" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
            <path d="M0,0 L0,6 L6,3 z" fill="#c8a96e"/>
          </marker>
        </defs>

        <!-- EXCLUSIVE -->
        <text x="130" y="18" fill="#c8a96e" font-size="10" text-anchor="middle" letter-spacing="1">EXCLUSIVE POLICY</text>
        <text x="130" y="32" fill="#7a7671" font-size="9" text-anchor="middle">only one Panel open at a time</text>

        <!-- Before: Panel A open -->
        <rect x="10" y="42" width="230" height="180" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="18" y="50" width="40" height="164" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <rect x="66" y="50" width="110" height="164" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="121" y="130" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
        <rect x="184" y="50" width="48" height="164" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="1.5" rx="3"/>
        <text x="208" y="126" fill="#6a3a3a" font-size="8" text-anchor="middle">Panel</text>
        <text x="208" y="138" fill="#5a2a2a" font-size="7" text-anchor="middle">A</text>
        <text x="130" y="232" fill="#7a7671" font-size="8" text-anchor="middle">Panel A open</text>

        <!-- Arrow -->
        <text x="262" y="128" fill="#c8a96e" font-size="8" text-anchor="middle">open</text>
        <text x="262" y="140" fill="#c8a96e" font-size="8" text-anchor="middle">Panel B</text>
        <line x1="250" y1="132" x2="272" y2="132" stroke="#c8a96e" stroke-width="1.5" marker-end="url(#arr-pg)"/>

        <!-- After: Panel B open, A ejected -->
        <rect x="285" y="42" width="230" height="180" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="293" y="50" width="40" height="164" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <rect x="341" y="50" width="110" height="164" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="396" y="130" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
        <rect x="459" y="50" width="48" height="164" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="1.5" rx="3"/>
        <text x="483" y="126" fill="#6a3a3a" font-size="8" text-anchor="middle">Panel</text>
        <text x="483" y="138" fill="#5a2a2a" font-size="7" text-anchor="middle">B</text>
        <text x="400" y="232" fill="#7a7671" font-size="8" text-anchor="middle">Panel A auto-ejected, Panel B takes its place</text>

        <!-- ADDITIVE -->
        <text x="650" y="18" fill="#7eb8c8" font-size="10" text-anchor="middle" letter-spacing="1">ADDITIVE POLICY</text>
        <text x="650" y="32" fill="#7a7671" font-size="9" text-anchor="middle">multiple Panels compress Viewport simultaneously</text>

        <rect x="535" y="42" width="340" height="180" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="543" y="50" width="40" height="164" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <!-- Panel A -->
        <rect x="591" y="50" width="52" height="164" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="1.5" rx="3"/>
        <text x="617" y="126" fill="#6a3a3a" font-size="8" text-anchor="middle">Panel</text>
        <text x="617" y="138" fill="#5a2a2a" font-size="7" text-anchor="middle">A</text>
        <!-- Viewport compressed -->
        <rect x="651" y="50" width="90" height="164" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="696" y="126" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
        <text x="696" y="138" fill="#2a2a4a" font-size="7" text-anchor="middle">compressed</text>
        <!-- Panel B -->
        <rect x="749" y="50" width="52" height="164" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="1.5" rx="3"/>
        <text x="775" y="126" fill="#6a3a3a" font-size="8" text-anchor="middle">Panel</text>
        <text x="775" y="138" fill="#5a2a2a" font-size="7" text-anchor="middle">B</text>
        <!-- Width annotation -->
        <line x1="591" y1="224" x2="801" y2="224" stroke="#5a5a6a" stroke-width="1"/>
        <line x1="591" y1="220" x2="591" y2="228" stroke="#5a5a6a" stroke-width="1"/>
        <line x1="801" y1="220" x2="801" y2="228" stroke="#5a5a6a" stroke-width="1"/>
        <text x="696" y="238" fill="#5a5a6a" font-size="7" text-anchor="middle">both Panels compress Viewport from both sides</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 7 — Exclusive policy (left): opening Panel B auto-ejects Panel A. Additive policy (right): both Panels are open, Viewport compressed from both sides.</p>

    <!-- Tabbed policy -->
    <div class="diagram-container" style="margin-top:20px">
      <svg class="diagram-svg" viewBox="0 0 900 200" xmlns="http://www.w3.org/2000/svg">

        <!-- TABBED -->
        <text x="220" y="18" fill="#7ec87e" font-size="10" text-anchor="middle" letter-spacing="1">TABBED POLICY</text>
        <text x="220" y="32" fill="#7a7671" font-size="9" text-anchor="middle">fixed footprint regardless of how many Panels are available</text>

        <rect x="10" y="42" width="420" height="145" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <rect x="18" y="50" width="40" height="129" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <!-- Viewport -->
        <rect x="66" y="50" width="220" height="129" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="176" y="113" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
        <!-- Tabbed panel group -->
        <rect x="294" y="50" width="128" height="129" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="1.5" rx="3"/>
        <!-- Tab bar inside panel -->
        <rect x="294" y="50" width="128" height="22" fill="#251818" stroke="#8a5a5a" stroke-width="1" rx="3"/>
        <rect x="298" y="53" width="34" height="16" fill="#3a2020" rx="2"/>
        <text x="315" y="64" fill="#8a5a5a" font-size="7" text-anchor="middle">Term</text>
        <rect x="336" y="53" width="34" height="16" fill="#2e1e1e" rx="2"/>
        <text x="353" y="64" fill="#5a3a3a" font-size="7" text-anchor="middle">Output</text>
        <rect x="374" y="53" width="44" height="16" fill="#2e1e1e" rx="2"/>
        <text x="396" y="64" fill="#5a3a3a" font-size="7" text-anchor="middle">Problems</text>
        <!-- Panel content -->
        <text x="358" y="110" fill="#5a3a3a" font-size="8" text-anchor="middle">TABBED</text>
        <text x="358" y="122" fill="#5a3a3a" font-size="8" text-anchor="middle">PANEL GROUP</text>
        <text x="358" y="134" fill="#4a2a2a" font-size="7" text-anchor="middle">fixed width</text>
        <text x="358" y="146" fill="#4a2a2a" font-size="7" text-anchor="middle">regardless of tab count</text>

        <!-- VS Code note -->
        <text x="560" y="50" fill="#c8a96e" font-size="10" font-weight="500">Example: VS Code</text>
        <text x="560" y="68" fill="#7a7671" font-size="9">The Explorer, Search, Source Control</text>
        <text x="560" y="82" fill="#7a7671" font-size="9">and Extensions panels form an</text>
        <text x="560" y="96" fill="#7a7671" font-size="9">Exclusive Panel Group on the leading</text>
        <text x="560" y="110" fill="#7a7671" font-size="9">edge. The Terminal, Output, and</text>
        <text x="560" y="124" fill="#7a7671" font-size="9">Problems panels form a Tabbed Panel</text>
        <text x="560" y="138" fill="#7a7671" font-size="9">Group on the bottom edge.</text>
        <text x="560" y="160" fill="#5a5650" font-size="8" font-style="italic">Two Panel Groups. Different policies.</text>
        <text x="560" y="174" fill="#5a5650" font-size="8" font-style="italic">Corner Ownership required.</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 8 — Tabbed policy: multiple Panels share one fixed-size region. The tab bar inside the Panel Group switches which Panel is visible.</p>

    <!-- Corner Ownership -->
    <div class="diagram-container" style="margin-top:20px">
      <svg class="diagram-svg" viewBox="0 0 900 280" xmlns="http://www.w3.org/2000/svg">

        <text x="200" y="18" fill="#a07ec8" font-size="11" text-anchor="middle" letter-spacing="1">CORNER OWNERSHIP</text>
        <text x="200" y="32" fill="#7a7671" font-size="9" text-anchor="middle">when Panel Groups on two axes are simultaneously active</text>
        <text x="650" y="18" fill="#a07ec8" font-size="11" text-anchor="middle" letter-spacing="1">CORNER OWNERSHIP</text>
        <text x="650" y="32" fill="#7a7671" font-size="9" text-anchor="middle">vertical group owns corner</text>
        <text x="200" y="32" fill="#7a7671" font-size="9" text-anchor="middle">horizontal group owns corner</text>

        <!-- Option A: horizontal (bottom) owns corner -->
        <text x="200" y="50" fill="#7a7671" font-size="9" text-anchor="middle" font-style="italic">horizontal (bottom) group owns corner</text>
        <rect x="10" y="58" width="380" height="205" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Top anchor -->
        <rect x="18" y="66" width="364" height="28" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <text x="200" y="83" fill="#3a5a3a" font-size="8" text-anchor="middle">top Anchor</text>
        <!-- Sidebar anchor -->
        <rect x="18" y="102" width="40" height="120" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <!-- Trailing panel - STOPS above bottom group -->
        <rect x="310" y="102" width="72" height="120" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="1.5" rx="3"/>
        <text x="346" y="158" fill="#6a3a3a" font-size="7" text-anchor="middle">Trailing</text>
        <text x="346" y="168" fill="#6a3a3a" font-size="7" text-anchor="middle">Panel Group</text>
        <text x="346" y="180" fill="#4a2a2a" font-size="6" text-anchor="middle">stops here ↓</text>
        <!-- Viewport -->
        <rect x="66" y="102" width="236" height="120" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="184" y="160" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
        <!-- Bottom panel - FULL WIDTH -->
        <rect x="18" y="230" width="364" height="25" fill="#1e1a2e" stroke="#8a5a8a" stroke-width="2" rx="3"/>
        <text x="200" y="246" fill="#6a4a8a" font-size="8" text-anchor="middle">Bottom Panel Group — owns full width ← corner ownership →</text>

        <!-- Corner highlight box -->
        <rect x="310" y="222" width="72" height="8" fill="#a07ec8" opacity="0.3" rx="1"/>
        <text x="346" y="265" fill="#a07ec8" font-size="7" text-anchor="middle">↑ corner owned by bottom group</text>

        <!-- Option B: vertical (trailing) owns corner -->
        <text x="650" y="50" fill="#7a7671" font-size="9" text-anchor="middle" font-style="italic">vertical (trailing) group owns corner</text>
        <rect x="460" y="58" width="380" height="205" fill="#1a1a2e" stroke="#4a5a8a" stroke-width="1.5" rx="4"/>
        <!-- Top anchor -->
        <rect x="468" y="66" width="364" height="28" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <text x="650" y="83" fill="#3a5a3a" font-size="8" text-anchor="middle">top Anchor</text>
        <!-- Sidebar -->
        <rect x="468" y="102" width="40" height="153" fill="#1e2a1e" stroke="#5a8a5a" stroke-width="1" rx="3"/>
        <!-- Trailing panel - FULL HEIGHT down to bottom -->
        <rect x="760" y="102" width="72" height="153" fill="#2e1e1e" stroke="#8a5a5a" stroke-width="2" rx="3"/>
        <text x="796" y="175" fill="#6a3a3a" font-size="7" text-anchor="middle">Trailing</text>
        <text x="796" y="185" fill="#6a3a3a" font-size="7" text-anchor="middle">Panel Group</text>
        <text x="796" y="197" fill="#6a3a3a" font-size="6" text-anchor="middle">owns corner</text>
        <text x="796" y="207" fill="#4a2a2a" font-size="6" text-anchor="middle">full height ↕</text>
        <!-- Viewport -->
        <rect x="516" y="102" width="236" height="120" fill="#1e1e2e" stroke="#5a5a8a" stroke-width="1" rx="3"/>
        <text x="634" y="160" fill="#3a3a5a" font-size="8" text-anchor="middle">VIEWPORT</text>
        <!-- Bottom panel - STOPS before trailing -->
        <rect x="516" y="230" width="236" height="25" fill="#1e1a2e" stroke="#8a5a8a" stroke-width="1.5" rx="3"/>
        <text x="634" y="246" fill="#6a4a8a" font-size="7" text-anchor="middle">Bottom Panel Group — stops here →</text>

        <!-- Corner highlight -->
        <rect x="752" y="222" width="80" height="33" fill="#a07ec8" opacity="0.3" rx="1"/>
        <text x="796" y="265" fill="#a07ec8" font-size="7" text-anchor="middle">↑ corner owned by trailing group</text>
      </svg>
    </div>
    <p class="diagram-caption">Fig 9 — Corner Ownership. Left: bottom Panel Group owns full width, trailing Panel Group stops above it. Right: trailing Panel Group owns full height, bottom Panel Group fills only the remaining width. This must be specified on the Chrome before building.</p>
  </section>

  <hr class="divider">

  <!-- SDL DESCRIPTION FORMAT -->
  <section class="section">
    <div class="section-label">Usage</div>
    <h2>Writing an SDL Description</h2>
    <h3>A compact, precise notation for communicating shell architecture</h3>
    <p class="section-intro">
      An SDL description should be readable by designers and developers alike. 
      It captures enough structure to begin implementation without visual assets.
    </p>

    <div class="sdl-description">
      <span class="keyword">Workspace</span> pattern with <span class="keyword">Controller</span>.<br><br>

      <span class="keyword">Leading Anchor</span>: sidebar, <span class="value">collapsible</span>, breakpoint response: <span class="value">Lift</span>.<br>
      &nbsp;&nbsp;<span class="keyword">Anchor Header</span>: workspace switcher.<br>
      &nbsp;&nbsp;<span class="keyword">Anchor Body</span>: conversation list, <span class="value">owned scroll</span>.<br>
      &nbsp;&nbsp;<span class="keyword">Anchor Footer</span>: User Profile trigger (<span class="value">Anchored Overlay</span>, preferred direction <span class="value">Up</span>), Invite action (<span class="value">Modal Overlay</span>).<br><br>

      <span class="keyword">Top Anchor</span>: header, <span class="value">fixed height</span>, <span class="keyword">Controller</span> of main Viewport.<br><br>

      <span class="keyword">Main Viewport</span>: <span class="value">Staged mode</span>, three stages (Chat, Cowork, Code), owned vertical scroll per stage.<br><br>

      <span class="keyword">Trailing Panel</span>: <span class="value">content-initiated trigger</span> (artifact content type), fixed width, compresses main Viewport on <span class="value">Inject</span>, user-dismissible via <span class="value">Eject</span>.
    </div>
    <p class="diagram-caption" style="margin-top:12px">Fig 10 — SDL description of Claude Desktop. A developer reading this has a clear architectural picture before writing a line of code.</p>

    <h3 style="margin-top:40px; margin-bottom:16px">Example: VS Code (with Panel Groups)</h3>
    <div class="sdl-description">
      <span class="keyword">Canvas</span> pattern.<br><br>

      <span class="keyword">Leading Anchor</span>: activity bar, <span class="value">fixed 48px</span>.<br><br>

      <span class="keyword">Leading Panel Group</span>, policy: <span class="value">Exclusive</span>, <span class="value">resizable width</span>.<br>
      &nbsp;&nbsp;Contains: Explorer, Search, Source Control, Extensions (all <span class="value">user-initiated</span> via activity bar).<br><br>

      <span class="keyword">Top Anchor</span>: tab bar, <span class="value">fixed height</span>.<br><br>

      <span class="keyword">Main Viewport</span>: <span class="value">Staged mode</span> (open editor tabs), <span class="value">owned scroll</span>.<br><br>

      <span class="keyword">Bottom Panel Group</span>, policy: <span class="value">Tabbed</span>, <span class="value">resizable height</span> (200–400px).<br>
      &nbsp;&nbsp;Contains: Terminal (<span class="value">user-initiated</span>), Output (<span class="value">state-initiated</span>), Problems (<span class="value">state-initiated</span>).<br><br>

      <span class="keyword">Chrome corner ownership</span>: <span class="value">Bottom Panel Group owns full width</span>.
    </div>
    <p class="diagram-caption" style="margin-top:12px">Fig 11 — SDL description of VS Code, demonstrating two Panel Groups with different policies and explicit Corner Ownership.</p>
  </section>

  <hr class="divider">

  <footer style="padding-bottom: 40px;">
    <div style="font-family: 'DM Mono', monospace; font-size: 11px; color: var(--text-dim); display: flex; justify-content: space-between;">
      <span>Shell Design Language · Draft 1.1</span>
      <span>Developed February 2026</span>
    </div>
  </footer>

</div>
</body>
</html>
